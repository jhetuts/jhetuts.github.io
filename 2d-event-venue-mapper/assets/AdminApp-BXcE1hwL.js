import{u as p,r as h,j as e,c as ie,a as ce,b as es,P as pe,d as ae,e as ts,f as ut,g as Re,h as xe,i as ss,k as rs,B as R,L as E,I as g,l as os,s as as,m as ns,T as Xe,n as K,o as q,p as G}from"./index-RTBCixFs.js";import{c as D,M as Oe,s as lt,i as $e,g as we,a as is,B as ls,u as cs,b as ds,d as hs,S as Pe,e as Me,f as Ae,h as ze,j as ne,D as xs,k as us,l as ps,m as fs,n as ms,V as gs,X as vs}from"./ViewerApp-CPTBp8BD.js";function bs(){const t=p(n=>n.requestFitView),a=p(n=>n.setActiveTool),r=p(n=>n.setPreviewMode),l=p(n=>n.setPreviewAsKiosk),s=p(n=>n.duplicateElements),d=p(n=>n.selectedElementIds);h.useEffect(()=>{const n=x=>{const u=x.target;if(u instanceof HTMLInputElement||u instanceof HTMLTextAreaElement||u instanceof HTMLElement&&u.isContentEditable)return;const m=x.altKey,i=x.ctrlKey||x.metaKey;if(m&&(x.key==="c"||x.key==="C")){x.preventDefault(),t();return}if(!m&&!i&&!x.shiftKey&&(x.key==="v"||x.key==="V")){x.preventDefault(),a("select");return}if(m&&(x.key==="p"||x.key==="P")){x.preventDefault(),l(!1),r(!0);return}if(m&&(x.key==="k"||x.key==="K")){x.preventDefault(),l(!0),r(!0);return}i&&(x.key==="d"||x.key==="D")&&d.length>0&&(x.preventDefault(),s(d))};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[t,a,r,l,s,d])}const js=[["path",{d:"M12 17V3",key:"1cwfxf"}],["path",{d:"m6 11 6 6 6-6",key:"12ii2o"}],["path",{d:"M19 21H5",key:"150jfl"}]],pt=D("arrow-down-to-line",js);const ys=[["path",{d:"M5 3h14",key:"7usisc"}],["path",{d:"m18 13-6-6-6 6",key:"1kf1n9"}],["path",{d:"M12 7v14",key:"1akyts"}]],ft=D("arrow-up-to-line",ys);const ws=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Cs=D("circle",ws);const Ns=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],le=D("copy",Ns);const ks=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Ss=D("download",ks);const Es=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ts=D("eye",Es);const Rs=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Ps=D("history",Rs);const Ms=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],mt=D("image",Ms);const As=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],zs=D("layers",As);const _s=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],Ds=D("monitor",_s);const Bs=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],Ls=D("mouse-pointer-2",Bs);const Ws=[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]],Is=D("mouse-pointer-click",Ws);const Ys=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],$s=D("palette",Ys);const Hs=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"m9 16 3-3 3 3",key:"1idcnm"}]],gt=D("panel-top-close",Hs);const Xs=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Os=D("plus",Xs);const Fs=[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]],Vs=D("redo-2",Fs);const Us=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Ks=D("rotate-ccw",Us);const qs=[["circle",{cx:"19",cy:"5",r:"2",key:"mhkx31"}],["circle",{cx:"5",cy:"19",r:"2",key:"v8kfzx"}],["path",{d:"M5 17A12 12 0 0 1 17 5",key:"1okkup"}]],Gs=D("spline",qs);const Zs=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],vt=D("square",Zs);const Js=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],de=D("trash-2",Js);const Qs=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],bt=D("type",Qs);const er=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],tr=D("undo-2",er);const sr=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],rr=D("upload",sr);function or({gridSize:t}){return e.jsx("defs",{children:e.jsx("pattern",{id:"admin-grid-pattern",width:t,height:t,patternUnits:"userSpaceOnUse",children:e.jsx("path",{d:`M ${t} 0 L 0 0 0 ${t}`,fill:"none",stroke:"#cbd5e1",strokeWidth:"1",opacity:"0.8"})})})}function ar({element:t,isSelected:a,onSelect:r}){const l=t.x+t.width/2,s=t.y+t.height/2,[d,n]=h.useState(!0),x=!!t.logoUrl&&d,u=6,m=t.width-u*2,i=t.height-u*2;return e.jsxs("g",{onClick:o=>{o.stopPropagation(),r(t.id,o)},style:{cursor:"pointer"},transform:t.rotation?`rotate(${t.rotation} ${l} ${s})`:void 0,children:[t.shape==="circle"?e.jsxs(e.Fragment,{children:[e.jsx("ellipse",{cx:l,cy:s,rx:t.width/2,ry:t.height/2,fill:t.fillEnabled!==!1?t.fillColor:"transparent",stroke:t.borderColor??"#1f2937",strokeWidth:t.borderWidth??1}),a&&e.jsx("ellipse",{cx:l,cy:s,rx:t.width/2+2,ry:t.height/2+2,fill:"none",stroke:"#3b82f6",strokeWidth:2,strokeDasharray:"6 3"}),x&&e.jsx("clipPath",{id:`clip-logo-${t.id}`,children:e.jsx("ellipse",{cx:l,cy:s,rx:m/2,ry:i/2})})]}):e.jsxs(e.Fragment,{children:[e.jsx("rect",{x:t.x,y:t.y,width:t.width,height:t.height,rx:Math.max(0,t.borderRadius??10),fill:t.fillEnabled!==!1?t.fillColor:"transparent",stroke:t.borderColor??"#1f2937",strokeWidth:t.borderWidth??1}),a&&e.jsx("rect",{x:t.x-2,y:t.y-2,width:t.width+4,height:t.height+4,rx:Math.max(0,(t.borderRadius??10)+2),fill:"none",stroke:"#3b82f6",strokeWidth:2,strokeDasharray:"6 3"}),x&&e.jsx("clipPath",{id:`clip-logo-${t.id}`,children:e.jsx("rect",{x:t.x+u,y:t.y+u,width:m,height:i,rx:Math.max(0,(t.borderRadius??10)-2)})})]}),x?e.jsx("image",{href:t.logoUrl,x:t.x+u,y:t.y+u,width:m,height:i,preserveAspectRatio:"xMidYMid meet",clipPath:`url(#clip-logo-${t.id})`,pointerEvents:"none",onError:()=>n(!1)}):e.jsxs(e.Fragment,{children:[e.jsx("text",{x:l,y:s-6,textAnchor:"middle",dominantBaseline:"middle",fill:t.textColor,fontSize:12,fontWeight:"600",pointerEvents:"none",children:t.name}),e.jsxs("text",{x:l,y:s+8,textAnchor:"middle",dominantBaseline:"middle",fill:t.textColor,fontSize:10,opacity:.7,pointerEvents:"none",children:["#",t.boothNumber]})]}),t.isStartingPoint&&e.jsx("foreignObject",{x:l-10,y:t.y-22,width:20,height:20,pointerEvents:"none",children:e.jsx(Oe,{className:"h-5 w-5 text-red-500"})})]})}function nr({element:t,isSelected:a,onSelect:r}){const l=t.x+t.width/2,s=t.y+t.height/2;return e.jsxs("g",{onClick:d=>{d.stopPropagation(),r(t.id,d)},style:{cursor:"pointer"},transform:t.rotation?`rotate(${t.rotation} ${l} ${s})`:void 0,children:[a&&e.jsx("rect",{x:t.x,y:t.y,width:t.width,height:t.height,fill:"transparent",stroke:"#3b82f6",strokeWidth:2,strokeDasharray:"6 3"}),e.jsx("foreignObject",{x:t.x,y:t.y,width:t.width,height:t.height,children:e.jsx("div",{style:{fontSize:t.fontSize,fontWeight:t.fontWeight,color:t.textColor,backgroundColor:t.fillColor==="transparent"?void 0:t.fillColor,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",padding:"4px"},children:t.text})})]})}function ir({element:t,isSelected:a,onSelect:r}){const l=t.x+t.width/2,s=t.y+t.height/2;return e.jsxs("g",{onClick:d=>{d.stopPropagation(),r(t.id,d)},style:{cursor:"pointer"},transform:t.rotation?`rotate(${t.rotation} ${l} ${s})`:void 0,children:[e.jsx("image",{href:t.imageUrl,x:t.x,y:t.y,width:t.width,height:t.height,opacity:t.opacity,preserveAspectRatio:"xMidYMid slice"}),a&&e.jsx("rect",{x:t.x,y:t.y,width:t.width,height:t.height,fill:"transparent",stroke:"#3b82f6",strokeWidth:2,strokeDasharray:"6 3"})]})}function lr({element:t,isSelected:a,onSelect:r}){const l=t.x+t.width/2,s=t.y+t.height/2;return e.jsxs("g",{onClick:d=>{d.stopPropagation(),r(t.id,d)},style:{cursor:"pointer"},transform:t.rotation?`rotate(${t.rotation} ${l} ${s})`:void 0,children:[e.jsx("rect",{x:t.x,y:t.y,width:t.width,height:t.height,rx:Math.max(0,t.borderRadius??4),fill:t.fillEnabled!==!1?t.fillColor:"transparent",stroke:t.borderColor??"#64748b",strokeWidth:t.borderWidth??2}),a&&e.jsx("rect",{x:t.x-2,y:t.y-2,width:t.width+4,height:t.height+4,rx:Math.max(0,(t.borderRadius??4)+2),fill:"none",stroke:"#3b82f6",strokeWidth:2,strokeDasharray:"6 3"})]})}function cr({element:t,isSelected:a,onSelect:r}){if(t.points.length<2)return null;const l=`arrow-${t.id}`,s=t.points.map(u=>`${u.x},${u.y}`).join(" "),d=t.connectorType==="directional",n=t.connectorType==="bidirectional",x=`arrow-start-${t.id}`;return e.jsxs("g",{onClick:u=>{u.stopPropagation(),r(t.id,u)},style:{cursor:"pointer"},children:[e.jsxs("defs",{children:[(d||n)&&e.jsx("marker",{id:l,viewBox:"0 0 10 7",refX:"10",refY:"3.5",markerWidth:"8",markerHeight:"6",orient:"auto-start-reverse",children:e.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:t.strokeColor})}),n&&e.jsx("marker",{id:x,viewBox:"0 0 10 7",refX:"0",refY:"3.5",markerWidth:"8",markerHeight:"6",orient:"auto-start-reverse",children:e.jsx("polygon",{points:"10 0, 0 3.5, 10 7",fill:t.strokeColor})})]}),a&&e.jsx("polyline",{points:s,fill:"none",stroke:"#3b82f6",strokeWidth:t.strokeWidth+4,strokeDasharray:"6 3",opacity:.4}),e.jsx("polyline",{points:s,fill:"none",stroke:t.strokeColor,strokeWidth:t.strokeWidth,strokeLinejoin:"round",strokeLinecap:"round",markerEnd:d||n?`url(#${l})`:void 0,markerStart:n?`url(#${x})`:void 0})]})}function dr({element:t,isSelected:a,onSelect:r}){switch(t.type){case"booth":return e.jsx(ar,{element:t,isSelected:a,onSelect:r});case"text":return e.jsx(nr,{element:t,isSelected:a,onSelect:r});case"image":return e.jsx(ir,{element:t,isSelected:a,onSelect:r});case"barricade":return e.jsx(lr,{element:t,isSelected:a,onSelect:r});case"connector":return e.jsx(cr,{element:t,isSelected:a,onSelect:r})}}const ct=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#ec4899","#06b6d4","#84cc16","#f97316","#6366f1"];function dt(){return ct[Math.floor(Math.random()*ct.length)]}const oe=8;function hr(){const t=h.useRef(null),a=h.useRef(null),[r,l]=h.useState(null),[s,d]=h.useState(null),[n,x]=h.useState(null),[u,m]=h.useState(1),[i,o]=h.useState({x:0,y:0}),[v,P]=h.useState(null),[k,L]=h.useState(!1),[H,$]=h.useState(!1),F=h.useRef({x:0,y:0,panX:0,panY:0}),V=h.useRef(!1),U=h.useRef(null),he=p(c=>c.removeElements),re=p(c=>c.moveElements);h.useEffect(()=>{const c=f=>{if(f.target instanceof HTMLInputElement||f.target instanceof HTMLTextAreaElement)return;if(f.code==="Space"&&!f.repeat){f.preventDefault(),$(!0);return}const C=p.getState(),T=C.selectedElementIds;(f.key==="Delete"||f.key==="Backspace")&&T.length>0&&(f.preventDefault(),he(T));const j={ArrowUp:[0,-1],ArrowDown:[0,1],ArrowLeft:[-1,0],ArrowRight:[1,0]}[f.key];if(j&&T.length>0){f.preventDefault();const w=f.shiftKey?C.venue.snapToGrid?C.venue.gridSize:10:1;re(T,j[0]*w,j[1]*w)}},y=f=>{f.code==="Space"&&$(!1)};return window.addEventListener("keydown",c),window.addEventListener("keyup",y),()=>{window.removeEventListener("keydown",c),window.removeEventListener("keyup",y)}},[he,re]),h.useEffect(()=>{const c=a.current;if(!c)return;const y=f=>f.preventDefault();return c.addEventListener("contextmenu",y),()=>c.removeEventListener("contextmenu",y)},[]);const b=p(c=>c.venue),_=p(c=>c.elements),M=p(c=>c.selectedElementIds),z=p(c=>c.activeTool),B=p(c=>c.setSelectedElement),Le=p(c=>c.toggleSelectedElement),fe=p(c=>c.addElement),Ze=p(c=>c.moveElement),Je=p(c=>c.moveElements),Qe=p(c=>c.resizeElement),et=p(c=>c.updateElement),Ne=p(c=>c.setStartingPoint),me=p(c=>c.setActiveTool),tt=p(c=>c.setVenue),We=p(c=>c.fitViewRequest),te=M.length===1?M[0]:null,J=h.useCallback((c,y)=>{const f=t.current;if(!f)return{x:0,y:0};const C=f.getBoundingClientRect(),T=(c-C.left)/u,N=(y-C.top)/u;return{x:T,y:N}},[u]),Q=h.useCallback(c=>b.snapToGrid?lt(c,b.gridSize):c,[b.snapToGrid,b.gridSize]),st=h.useCallback((c,y)=>_.find(f=>$e(f)&&c>=f.x&&c<=f.x+f.width&&y>=f.y&&y<=f.y+f.height),[_]),Ht=h.useCallback(c=>{if(V.current){V.current=!1;return}if(r||s||n)return;const{x:y,y:f}=J(c.clientX,c.clientY),C=Q(y),T=Q(f);switch(z){case"booth-circle":{const N={id:we(),type:"booth",shape:"circle",x:C-40,y:T-40,width:80,height:80,rotation:0,name:"Booth",boothNumber:String(_.filter(j=>j.type==="booth").length+1),tierId:void 0,fillEnabled:!0,fillColor:dt(),borderColor:"#1f2937",borderWidth:1,borderRadius:16,textColor:"#ffffff",showWebsiteCTA:!0,showDescription:!0,isStartingPoint:!1,websiteCtaText:"Visit website",websiteCtaButtonColor:"#111827",websiteCtaTextColor:"#ffffff",websiteCtaRadius:10,showVisitedCTA:!1,visitedCtaText:"Mark as visited",visitedCtaButtonColor:"#111827",visitedCtaTextColor:"#ffffff",visitedCtaRadius:10,showFavoriteCTA:!1,favoriteCtaText:"Mark as favorite",favoriteCtaButtonColor:"#111827",favoriteCtaTextColor:"#ffffff",favoriteCtaRadius:10,showRateCTA:!1,rateCtaText:"Rate",rateCtaButtonColor:"#111827",rateCtaTextColor:"#ffffff",rateCtaRadius:10,showDirectionCTA:!0,directionCtaText:"Get direction",directionCtaButtonColor:"#111827",directionCtaTextColor:"#ffffff",directionCtaRadius:10,popupConfigured:!1};fe(N),B(N.id),me("select");break}case"booth-square":{const N={id:we(),type:"booth",shape:"square",x:C-50,y:T-40,width:100,height:80,rotation:0,name:"Booth",boothNumber:String(_.filter(j=>j.type==="booth").length+1),tierId:void 0,fillEnabled:!0,fillColor:dt(),borderColor:"#1f2937",borderWidth:1,borderRadius:10,textColor:"#ffffff",showWebsiteCTA:!0,showDescription:!0,isStartingPoint:!1,websiteCtaText:"Visit website",websiteCtaButtonColor:"#111827",websiteCtaTextColor:"#ffffff",websiteCtaRadius:10,showVisitedCTA:!1,visitedCtaText:"Mark as visited",visitedCtaButtonColor:"#111827",visitedCtaTextColor:"#ffffff",visitedCtaRadius:10,showFavoriteCTA:!1,favoriteCtaText:"Mark as favorite",favoriteCtaButtonColor:"#111827",favoriteCtaTextColor:"#ffffff",favoriteCtaRadius:10,showRateCTA:!1,rateCtaText:"Rate",rateCtaButtonColor:"#111827",rateCtaTextColor:"#ffffff",rateCtaRadius:10,showDirectionCTA:!0,directionCtaText:"Get direction",directionCtaButtonColor:"#111827",directionCtaTextColor:"#ffffff",directionCtaRadius:10,popupConfigured:!1};fe(N),B(N.id),me("select");break}case"text":{const N={id:we(),type:"text",x:C-60,y:T-15,width:120,height:30,rotation:0,text:"New Text",fontSize:16,fontWeight:"normal",fillColor:"transparent",textColor:"#000000"};fe(N),B(N.id),me("select");break}case"barricade":{const N={id:we(),type:"barricade",x:C-60,y:T-20,width:120,height:40,rotation:0,fillEnabled:!0,fillColor:"#94a3b8",borderColor:"#64748b",borderWidth:2,borderRadius:4};fe(N),B(N.id),me("select");break}case"image":{const N=window.prompt("Enter image URL:");if(N){const j={id:we(),type:"image",x:C-75,y:T-50,width:150,height:100,rotation:0,imageUrl:N,opacity:1};fe(j),B(j.id)}me("select");break}case"starting-point":{const N=st(y,f);N&&Ne(N.id);break}default:B(null);break}},[z,J,Q,_,r,s,n,fe,B,me,Ne,st]),Xt=h.useCallback((c,y)=>{if(z==="starting-point"){const f=_.find(C=>C.id===c);f&&$e(f)&&Ne(c);return}y&&(y.ctrlKey||y.metaKey||y.shiftKey)?Le(c):B(c)},[z,_,B,Le,Ne]),ke=h.useCallback((c,y)=>{const f=a.current;if(!f)return null;const C=f.getBoundingClientRect(),T=C.left+i.x,N=C.top+i.y,j=T+b.width*u,w=N+b.height*u,A=Math.abs(c-T)<=oe,I=Math.abs(c-j)<=oe,se=Math.abs(y-N)<=oe,ve=Math.abs(y-w)<=oe,je=c>=T-oe&&c<=j+oe,ye=y>=N-oe&&y<=w+oe;return A&&se?"canvas-top-left":I&&se?"canvas-top-right":A&&ve?"canvas-bottom-left":I&&ve?"canvas-bottom-right":A&&ye?"canvas-left":I&&ye?"canvas-right":se&&je?"canvas-top":ve&&je?"canvas-bottom":null},[i,u,b.width,b.height]),[X,Ot]=h.useState(null),Ft=h.useCallback(c=>{if(s){const y=(c.clientX-s.startX)/u,f=(c.clientY-s.startY)/u,C=A=>b.snapToGrid?lt(A,b.gridSize):A;let T=s.startWidth,N=s.startHeight,j=s.startPanX,w=s.startPanY;(s.type==="canvas-right"||s.type==="canvas-top-right"||s.type==="canvas-bottom-right")&&(T=Math.max(200,C(s.startWidth+y))),(s.type==="canvas-left"||s.type==="canvas-top-left"||s.type==="canvas-bottom-left")&&(T=Math.max(200,C(s.startWidth-y)),j=s.startPanX+(s.startWidth-T)*u),(s.type==="canvas-bottom"||s.type==="canvas-bottom-left"||s.type==="canvas-bottom-right")&&(N=Math.max(200,C(s.startHeight+f))),(s.type==="canvas-top"||s.type==="canvas-top-left"||s.type==="canvas-top-right")&&(N=Math.max(200,C(s.startHeight-f)),w=s.startPanY+(s.startHeight-N)*u),tt({width:T,height:N}),o({x:j,y:w});return}z==="select"&&!r&&!k&&Ot(ke(c.clientX,c.clientY))},[s,z,r,k,u,b.snapToGrid,b.gridSize,ke,tt]),Vt=h.useCallback(c=>{if(z!=="select")return;const y=ke(c.clientX,c.clientY);y&&(c.preventDefault(),c.stopPropagation(),d({type:y,startX:c.clientX,startY:c.clientY,startWidth:b.width,startHeight:b.height,startPanX:i.x,startPanY:i.y}))},[z,ke,b.width,b.height,i.x,i.y]),rt=h.useCallback(()=>{d(null)},[]),Ut=h.useCallback(c=>{if(s)return;if(c.button===1||c.button===2||c.button===0&&c.altKey||c.button===0&&H){L(!0),F.current={x:c.clientX,y:c.clientY,panX:i.x,panY:i.y},c.preventDefault();return}const f=c.target;if(f.closest("[data-rotation-handle]")&&te){const j=J(c.clientX,c.clientY),w=_.find(A=>A.id===te);if(w&&"rotation"in w){const A=w.x+w.width/2,I=w.y+w.height/2,se=Math.atan2(j.y-I,j.x-A);l({elementId:te,offsetX:0,offsetY:0,type:"rotate",startAngle:se,startRotation:w.rotation})}c.stopPropagation();return}if(f.closest("[data-resize-handle]")&&te){const j=J(c.clientX,c.clientY),w=_.find(A=>A.id===te);w&&"width"in w&&l({elementId:te,offsetX:j.x-(w.x+w.width),offsetY:j.y-(w.y+w.height),type:"resize"}),c.stopPropagation();return}const N=f.closest("[data-element-id]");if(N&&z==="select"){const j=N.getAttribute("data-element-id"),w=_.find(A=>A.id===j);if(w&&"x"in w){const A=J(c.clientX,c.clientY),I=M.includes(j),se=I&&M.length>1;!I&&!c.ctrlKey&&!c.metaKey&&!c.shiftKey&&B(j),l({elementId:j,offsetX:A.x-w.x,offsetY:A.y-w.y,type:"move",multi:se||M.length>1&&(c.ctrlKey||c.metaKey||c.shiftKey),lastX:A.x,lastY:A.y})}return}if(z==="select"&&c.button===0&&!N){const j=J(c.clientX,c.clientY);x({startX:j.x,startY:j.y,currentX:j.x,currentY:j.y})}},[s,z,M,te,_,J,i,H,B]),Kt=h.useCallback(c=>{if(k){const f=c.clientX-F.current.x,C=c.clientY-F.current.y;o({x:F.current.panX+f,y:F.current.panY+C});return}if(n){const f=J(c.clientX,c.clientY);x(C=>C?{...C,currentX:f.x,currentY:f.y}:null);return}if(!r)return;const y=J(c.clientX,c.clientY);if(r.type==="rotate"){const f=_.find(C=>C.id===r.elementId);if(f&&"rotation"in f&&r.startAngle!=null&&r.startRotation!=null){const C=f.x+f.width/2,T=f.y+f.height/2,j=(Math.atan2(y.y-T,y.x-C)-r.startAngle)*180/Math.PI;let w=r.startRotation+j;w=(w%360+360)%360,w>180&&(w-=360),et(r.elementId,{rotation:Math.round(w*10)/10})}return}if(r.type==="move")if(r.multi&&M.length>1){const f=Q(y.x-(r.lastX??y.x)),C=Q(y.y-(r.lastY??y.y));(f!==0||C!==0)&&(Je(M,f,C),l({...r,lastX:(r.lastX??y.x)+f,lastY:(r.lastY??y.y)+C}))}else{const f=Q(y.x-r.offsetX),C=Q(y.y-r.offsetY);Ze(r.elementId,f,C)}else{const f=_.find(C=>C.id===r.elementId);if(f&&"width"in f){const C=Math.max(20,Q(y.x-r.offsetX-f.x)),T=Math.max(20,Q(y.y-r.offsetY-f.y));Qe(r.elementId,C,T)}}},[r,k,n,J,Q,Ze,Je,Qe,et,_,M]),ot=h.useCallback(()=>{if(n){const c=Math.min(n.startX,n.currentX),y=Math.min(n.startY,n.currentY),f=Math.abs(n.currentX-n.startX),C=Math.abs(n.currentY-n.startY);if(f>3||C>3){const T=_.filter(N=>{if(!("x"in N&&"width"in N))return!1;const j=N.x,w=N.y,A=N.width,I=N.height;return j<c+f&&j+A>c&&w<y+C&&w+I>y}).map(N=>N.id);T.length>0?(p.setState({selectedElementIds:T}),V.current=!0):B(null)}x(null);return}l(null),L(!1)},[n,_,B]),Ie=h.useCallback(c=>{c.preventDefault();const y=c.deltaY>0?.95:1.05;m(f=>Math.min(5,Math.max(.1,f*y)))},[]);h.useEffect(()=>{const c=a.current;if(c)return c.addEventListener("wheel",Ie,{passive:!1}),()=>c.removeEventListener("wheel",Ie)},[Ie]);const at=h.useRef({zoom:1,pan:{x:0,y:0}});h.useEffect(()=>{at.current={zoom:u,pan:i}},[u,i]),h.useEffect(()=>{const c=a.current;if(!c)return;const y=(j,w)=>Math.hypot(w.clientX-j.clientX,w.clientY-j.clientY),f=(j,w)=>({x:(j.clientX+w.clientX)/2,y:(j.clientY+w.clientY)/2}),C=j=>{if(j.touches.length===2){const{zoom:w,pan:A}=at.current,I=f(j.touches[0],j.touches[1]);U.current={distance:y(j.touches[0],j.touches[1]),centerX:I.x,centerY:I.y,zoom:w,panX:A.x,panY:A.y}}},T=j=>{if(j.touches.length===2&&U.current){j.preventDefault();const w=U.current,A=y(j.touches[0],j.touches[1]),I=f(j.touches[0],j.touches[1]),se=A/w.distance,ve=Math.min(5,Math.max(.1,w.zoom*se)),je=I.x-w.centerX,ye=I.y-w.centerY;U.current={distance:A,centerX:I.x,centerY:I.y,zoom:ve,panX:w.panX+je,panY:w.panY+ye},m(ve),o({x:w.panX+je,y:w.panY+ye})}},N=j=>{j.touches.length<2&&(U.current=null)};return c.addEventListener("touchstart",C,{passive:!0}),c.addEventListener("touchmove",T,{passive:!1}),c.addEventListener("touchend",N,{passive:!0}),c.addEventListener("touchcancel",N,{passive:!0}),()=>{c.removeEventListener("touchstart",C),c.removeEventListener("touchmove",T),c.removeEventListener("touchend",N),c.removeEventListener("touchcancel",N)}},[]);const qt=h.useCallback(()=>m(c=>Math.min(5,c*1.25)),[]),Gt=h.useCallback(()=>m(c=>Math.max(.1,c*.8)),[]),Zt=h.useCallback(()=>{m(1),o({x:0,y:0})},[]),Ye=h.useCallback(()=>{const c=t.current?.parentElement;if(!c)return;const y=c.clientWidth,f=c.clientHeight,C=Math.min(y/b.width,f/b.height)*.9;m(Math.min(5,Math.max(.1,C))),o({x:(y-b.width*C)/2,y:(f-b.height*C)/2})},[b.width,b.height]),nt=h.useRef(0);h.useEffect(()=>{if(We>nt.current){nt.current=We;const c=requestAnimationFrame(()=>Ye());return()=>cancelAnimationFrame(c)}},[We,Ye]);const O=te?_.find(c=>c.id===te):null,Jt=O&&"rotation"in O,ge=O&&$e(O)?O:null,Qt=ge&&ge.popupConfigured&&ge.id!==v?ge:null,it=s?s.type==="canvas-left"||s.type==="canvas-right"?"ew-resize":s.type==="canvas-top"||s.type==="canvas-bottom"?"ns-resize":s.type==="canvas-top-left"||s.type==="canvas-bottom-right"?"nwse-resize":"nesw-resize":X==="canvas-left"||X==="canvas-right"?"ew-resize":X==="canvas-top"||X==="canvas-bottom"?"ns-resize":X==="canvas-top-left"||X==="canvas-bottom-right"?"nwse-resize":X==="canvas-top-right"||X==="canvas-bottom-left"?"nesw-resize":void 0;return e.jsxs("div",{ref:a,className:"relative flex-1 overflow-hidden bg-muted",onMouseMove:Ft,onMouseDown:Vt,onMouseUp:rt,onMouseLeave:rt,style:{cursor:it,touchAction:"none"},children:[e.jsxs("svg",{ref:t,width:b.width*u,height:b.height*u,viewBox:`0 0 ${b.width} ${b.height}`,className:"absolute",style:{left:i.x,top:i.y,cursor:it?void 0:k?"grabbing":H?"grab":n?"crosshair":r?"move":z!=="select"?"crosshair":"default"},onClick:Ht,onMouseDown:Ut,onMouseMove:Kt,onMouseUp:ot,onMouseLeave:ot,children:[e.jsx("rect",{x:"0",y:"0",width:b.width,height:b.height,fill:b.backgroundColor}),!b.backgroundImage&&e.jsx(is,{venue:b,elements:_,idPrefix:"admin-map-bg",opacity:.55}),b.backgroundImage&&e.jsx("g",{transform:(b.backgroundRotation??0)!==0||(b.backgroundZoom??1)!==1?`translate(${b.width/2}, ${b.height/2}) rotate(${b.backgroundRotation??0}) scale(${b.backgroundZoom??1}) translate(${-b.width/2}, ${-b.height/2})`:void 0,style:{pointerEvents:"none"},children:e.jsx("image",{href:b.backgroundImage,x:"0",y:"0",width:b.width,height:b.height,opacity:b.backgroundOpacity??1,preserveAspectRatio:"xMidYMid slice"})}),b.showGrid&&e.jsxs(e.Fragment,{children:[e.jsx(or,{gridSize:b.gridSize}),e.jsx("rect",{x:"0",y:"0",width:b.width,height:b.height,fill:"url(#admin-grid-pattern)"})]}),_.map(c=>e.jsx("g",{"data-element-id":c.id,children:e.jsx(dr,{element:c,isSelected:M.includes(c.id),onSelect:Xt})},c.id)),O&&"width"in O&&e.jsx("rect",{"data-resize-handle":!0,x:O.x+O.width-5,y:O.y+O.height-5,width:10,height:10,fill:"#3b82f6",stroke:"#fff",strokeWidth:1,style:{cursor:"nwse-resize"}}),Jt&&O&&"width"in O&&e.jsx("ellipse",{"data-rotation-handle":!0,cx:O.x+O.width/2,cy:O.y-14,rx:6,ry:6,fill:"#3b82f6",stroke:"#fff",strokeWidth:1,style:{cursor:"grab"}}),z==="select"&&e.jsxs(e.Fragment,{children:[e.jsx("rect",{x:-3,y:b.height/2-20,width:6,height:40,rx:3,fill:"#94a3b8",opacity:X==="canvas-left"||s?.type==="canvas-left"?.9:.35,style:{cursor:"ew-resize",pointerEvents:"none"}}),e.jsx("rect",{x:b.width-3,y:b.height/2-20,width:6,height:40,rx:3,fill:"#94a3b8",opacity:X==="canvas-right"||s?.type==="canvas-right"?.9:.3,style:{cursor:"ew-resize",pointerEvents:"none"}}),e.jsx("rect",{x:b.width/2-20,y:-3,width:40,height:6,rx:3,fill:"#94a3b8",opacity:X==="canvas-top"||s?.type==="canvas-top"?.9:.35,style:{cursor:"ns-resize",pointerEvents:"none"}}),e.jsx("rect",{x:b.width/2-20,y:b.height-3,width:40,height:6,rx:3,fill:"#94a3b8",opacity:X==="canvas-bottom"||s?.type==="canvas-bottom"?.9:.3,style:{cursor:"ns-resize",pointerEvents:"none"}}),e.jsx("rect",{x:-8,y:-8,width:10,height:10,rx:2,fill:"#64748b",opacity:X==="canvas-top-left"||s?.type==="canvas-top-left"?.9:.4,style:{cursor:"nwse-resize",pointerEvents:"none"}}),e.jsx("rect",{x:b.width-8,y:-8,width:10,height:10,rx:2,fill:"#64748b",opacity:X==="canvas-top-right"||s?.type==="canvas-top-right"?.9:.4,style:{cursor:"nesw-resize",pointerEvents:"none"}}),e.jsx("rect",{x:-8,y:b.height-8,width:10,height:10,rx:2,fill:"#64748b",opacity:X==="canvas-bottom-left"||s?.type==="canvas-bottom-left"?.9:.4,style:{cursor:"nesw-resize",pointerEvents:"none"}}),e.jsx("rect",{x:b.width-8,y:b.height-8,width:10,height:10,rx:2,fill:"#64748b",opacity:X==="canvas-bottom-right"||s?.type==="canvas-bottom-right"?.9:.4,style:{cursor:"nwse-resize",pointerEvents:"none"}})]}),n&&e.jsx("rect",{x:Math.min(n.startX,n.currentX),y:Math.min(n.startY,n.currentY),width:Math.abs(n.currentX-n.startX),height:Math.abs(n.currentY-n.startY),fill:"rgba(59,130,246,0.08)",stroke:"#3b82f6",strokeWidth:1,strokeDasharray:"4 2",pointerEvents:"none"})]}),e.jsxs("div",{className:"absolute bottom-3 left-3 flex items-center gap-1 rounded-xl border bg-background/90 px-1 py-1 shadow-lg backdrop-blur-sm",children:[e.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-lg text-sm font-medium text-muted-foreground hover:bg-muted hover:text-foreground transition-colors",onClick:Gt,title:"Zoom out",children:"âˆ’"}),e.jsxs("button",{className:"flex h-7 min-w-14 items-center justify-center rounded-lg text-xs font-medium text-muted-foreground hover:bg-muted hover:text-foreground transition-colors",onClick:Zt,title:"Reset zoom",children:[Math.round(u*100),"%"]}),e.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-lg text-sm font-medium text-muted-foreground hover:bg-muted hover:text-foreground transition-colors",onClick:qt,title:"Zoom in",children:"+"}),e.jsx("div",{className:"mx-0.5 h-4 w-px bg-border"}),e.jsx("button",{className:"flex h-7 items-center justify-center rounded-lg px-2 text-[10px] font-medium text-muted-foreground hover:bg-muted hover:text-foreground transition-colors",onClick:Ye,title:"Fit to view (Alt+C)",children:"Fit"})]}),e.jsx(ls,{booth:Qt,onClose:()=>{ge&&P(ge.id)},containerRef:t,viewTransform:{x:i.x,y:i.y,scale:u}})]})}const Fe=h.forwardRef(({className:t,...a},r)=>e.jsx("textarea",{className:ie("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...a}));Fe.displayName="Textarea";var _e="Switch",[xr]=ut(_e),[ur,pr]=xr(_e),jt=h.forwardRef((t,a)=>{const{__scopeSwitch:r,name:l,checked:s,defaultChecked:d,required:n,disabled:x,value:u="on",onCheckedChange:m,form:i,...o}=t,[v,P]=h.useState(null),k=ce(a,V=>P(V)),L=h.useRef(!1),H=v?i||!!v.closest("form"):!0,[$,F]=es({prop:s,defaultProp:d??!1,onChange:m,caller:_e});return e.jsxs(ur,{scope:r,checked:$,disabled:x,children:[e.jsx(pe.button,{type:"button",role:"switch","aria-checked":$,"aria-required":n,"data-state":Nt($),"data-disabled":x?"":void 0,disabled:x,value:u,...o,ref:k,onClick:ae(t.onClick,V=>{F(U=>!U),H&&(L.current=V.isPropagationStopped(),L.current||V.stopPropagation())})}),H&&e.jsx(Ct,{control:v,bubbles:!L.current,name:l,value:u,checked:$,required:n,disabled:x,form:i,style:{transform:"translateX(-100%)"}})]})});jt.displayName=_e;var yt="SwitchThumb",wt=h.forwardRef((t,a)=>{const{__scopeSwitch:r,...l}=t,s=pr(yt,r);return e.jsx(pe.span,{"data-state":Nt(s.checked),"data-disabled":s.disabled?"":void 0,...l,ref:a})});wt.displayName=yt;var fr="SwitchBubbleInput",Ct=h.forwardRef(({__scopeSwitch:t,control:a,checked:r,bubbles:l=!0,...s},d)=>{const n=h.useRef(null),x=ce(n,d),u=cs(r),m=ts(a);return h.useEffect(()=>{const i=n.current;if(!i)return;const o=window.HTMLInputElement.prototype,P=Object.getOwnPropertyDescriptor(o,"checked").set;if(u!==r&&P){const k=new Event("click",{bubbles:l});P.call(i,r),i.dispatchEvent(k)}},[u,r,l]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:x,style:{...s.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Ct.displayName=fr;function Nt(t){return t?"checked":"unchecked"}var kt=jt,mr=wt;const Y=h.forwardRef(({className:t,...a},r)=>e.jsx(kt,{className:ie("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...a,ref:r,children:e.jsx(mr,{className:ie("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));Y.displayName=kt.displayName;function gr(t,a){return h.useReducer((r,l)=>a[r][l]??r,t)}var Ve="ScrollArea",[St]=ut(Ve),[vr,Z]=St(Ve),Et=h.forwardRef((t,a)=>{const{__scopeScrollArea:r,type:l="hover",dir:s,scrollHideDelay:d=600,...n}=t,[x,u]=h.useState(null),[m,i]=h.useState(null),[o,v]=h.useState(null),[P,k]=h.useState(null),[L,H]=h.useState(null),[$,F]=h.useState(0),[V,U]=h.useState(0),[he,re]=h.useState(!1),[b,_]=h.useState(!1),M=ce(a,B=>u(B)),z=ds(s);return e.jsx(vr,{scope:r,type:l,dir:z,scrollHideDelay:d,scrollArea:x,viewport:m,onViewportChange:i,content:o,onContentChange:v,scrollbarX:P,onScrollbarXChange:k,scrollbarXEnabled:he,onScrollbarXEnabledChange:re,scrollbarY:L,onScrollbarYChange:H,scrollbarYEnabled:b,onScrollbarYEnabledChange:_,onCornerWidthChange:F,onCornerHeightChange:U,children:e.jsx(pe.div,{dir:z,...n,ref:M,style:{position:"relative","--radix-scroll-area-corner-width":$+"px","--radix-scroll-area-corner-height":V+"px",...t.style}})})});Et.displayName=Ve;var Tt="ScrollAreaViewport",Rt=h.forwardRef((t,a)=>{const{__scopeScrollArea:r,children:l,nonce:s,...d}=t,n=Z(Tt,r),x=h.useRef(null),u=ce(a,x,n.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),e.jsx(pe.div,{"data-radix-scroll-area-viewport":"",...d,ref:u,style:{overflowX:n.scrollbarXEnabled?"scroll":"hidden",overflowY:n.scrollbarYEnabled?"scroll":"hidden",...t.style},children:e.jsx("div",{ref:n.onContentChange,style:{minWidth:"100%",display:"table"},children:l})})]})});Rt.displayName=Tt;var ee="ScrollAreaScrollbar",Ue=h.forwardRef((t,a)=>{const{forceMount:r,...l}=t,s=Z(ee,t.__scopeScrollArea),{onScrollbarXEnabledChange:d,onScrollbarYEnabledChange:n}=s,x=t.orientation==="horizontal";return h.useEffect(()=>(x?d(!0):n(!0),()=>{x?d(!1):n(!1)}),[x,d,n]),s.type==="hover"?e.jsx(br,{...l,ref:a,forceMount:r}):s.type==="scroll"?e.jsx(jr,{...l,ref:a,forceMount:r}):s.type==="auto"?e.jsx(Pt,{...l,ref:a,forceMount:r}):s.type==="always"?e.jsx(Ke,{...l,ref:a}):null});Ue.displayName=ee;var br=h.forwardRef((t,a)=>{const{forceMount:r,...l}=t,s=Z(ee,t.__scopeScrollArea),[d,n]=h.useState(!1);return h.useEffect(()=>{const x=s.scrollArea;let u=0;if(x){const m=()=>{window.clearTimeout(u),n(!0)},i=()=>{u=window.setTimeout(()=>n(!1),s.scrollHideDelay)};return x.addEventListener("pointerenter",m),x.addEventListener("pointerleave",i),()=>{window.clearTimeout(u),x.removeEventListener("pointerenter",m),x.removeEventListener("pointerleave",i)}}},[s.scrollArea,s.scrollHideDelay]),e.jsx(Re,{present:r||d,children:e.jsx(Pt,{"data-state":d?"visible":"hidden",...l,ref:a})})}),jr=h.forwardRef((t,a)=>{const{forceMount:r,...l}=t,s=Z(ee,t.__scopeScrollArea),d=t.orientation==="horizontal",n=Be(()=>u("SCROLL_END"),100),[x,u]=gr("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return h.useEffect(()=>{if(x==="idle"){const m=window.setTimeout(()=>u("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(m)}},[x,s.scrollHideDelay,u]),h.useEffect(()=>{const m=s.viewport,i=d?"scrollLeft":"scrollTop";if(m){let o=m[i];const v=()=>{const P=m[i];o!==P&&(u("SCROLL"),n()),o=P};return m.addEventListener("scroll",v),()=>m.removeEventListener("scroll",v)}},[s.viewport,d,u,n]),e.jsx(Re,{present:r||x!=="hidden",children:e.jsx(Ke,{"data-state":x==="hidden"?"hidden":"visible",...l,ref:a,onPointerEnter:ae(t.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:ae(t.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),Pt=h.forwardRef((t,a)=>{const r=Z(ee,t.__scopeScrollArea),{forceMount:l,...s}=t,[d,n]=h.useState(!1),x=t.orientation==="horizontal",u=Be(()=>{if(r.viewport){const m=r.viewport.offsetWidth<r.viewport.scrollWidth,i=r.viewport.offsetHeight<r.viewport.scrollHeight;n(x?m:i)}},10);return be(r.viewport,u),be(r.content,u),e.jsx(Re,{present:l||d,children:e.jsx(Ke,{"data-state":d?"visible":"hidden",...s,ref:a})})}),Ke=h.forwardRef((t,a)=>{const{orientation:r="vertical",...l}=t,s=Z(ee,t.__scopeScrollArea),d=h.useRef(null),n=h.useRef(0),[x,u]=h.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),m=Dt(x.viewport,x.content),i={...l,sizes:x,onSizesChange:u,hasThumb:m>0&&m<1,onThumbChange:v=>d.current=v,onThumbPointerUp:()=>n.current=0,onThumbPointerDown:v=>n.current=v};function o(v,P){return Sr(v,n.current,x,P)}return r==="horizontal"?e.jsx(yr,{...i,ref:a,onThumbPositionChange:()=>{if(s.viewport&&d.current){const v=s.viewport.scrollLeft,P=ht(v,x,s.dir);d.current.style.transform=`translate3d(${P}px, 0, 0)`}},onWheelScroll:v=>{s.viewport&&(s.viewport.scrollLeft=v)},onDragScroll:v=>{s.viewport&&(s.viewport.scrollLeft=o(v,s.dir))}}):r==="vertical"?e.jsx(wr,{...i,ref:a,onThumbPositionChange:()=>{if(s.viewport&&d.current){const v=s.viewport.scrollTop,P=ht(v,x);d.current.style.transform=`translate3d(0, ${P}px, 0)`}},onWheelScroll:v=>{s.viewport&&(s.viewport.scrollTop=v)},onDragScroll:v=>{s.viewport&&(s.viewport.scrollTop=o(v))}}):null}),yr=h.forwardRef((t,a)=>{const{sizes:r,onSizesChange:l,...s}=t,d=Z(ee,t.__scopeScrollArea),[n,x]=h.useState(),u=h.useRef(null),m=ce(a,u,d.onScrollbarXChange);return h.useEffect(()=>{u.current&&x(getComputedStyle(u.current))},[u]),e.jsx(At,{"data-orientation":"horizontal",...s,ref:m,sizes:r,style:{bottom:0,left:d.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:d.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":De(r)+"px",...t.style},onThumbPointerDown:i=>t.onThumbPointerDown(i.x),onDragScroll:i=>t.onDragScroll(i.x),onWheelScroll:(i,o)=>{if(d.viewport){const v=d.viewport.scrollLeft+i.deltaX;t.onWheelScroll(v),Lt(v,o)&&i.preventDefault()}},onResize:()=>{u.current&&d.viewport&&n&&l({content:d.viewport.scrollWidth,viewport:d.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:Te(n.paddingLeft),paddingEnd:Te(n.paddingRight)}})}})}),wr=h.forwardRef((t,a)=>{const{sizes:r,onSizesChange:l,...s}=t,d=Z(ee,t.__scopeScrollArea),[n,x]=h.useState(),u=h.useRef(null),m=ce(a,u,d.onScrollbarYChange);return h.useEffect(()=>{u.current&&x(getComputedStyle(u.current))},[u]),e.jsx(At,{"data-orientation":"vertical",...s,ref:m,sizes:r,style:{top:0,right:d.dir==="ltr"?0:void 0,left:d.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":De(r)+"px",...t.style},onThumbPointerDown:i=>t.onThumbPointerDown(i.y),onDragScroll:i=>t.onDragScroll(i.y),onWheelScroll:(i,o)=>{if(d.viewport){const v=d.viewport.scrollTop+i.deltaY;t.onWheelScroll(v),Lt(v,o)&&i.preventDefault()}},onResize:()=>{u.current&&d.viewport&&n&&l({content:d.viewport.scrollHeight,viewport:d.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:Te(n.paddingTop),paddingEnd:Te(n.paddingBottom)}})}})}),[Cr,Mt]=St(ee),At=h.forwardRef((t,a)=>{const{__scopeScrollArea:r,sizes:l,hasThumb:s,onThumbChange:d,onThumbPointerUp:n,onThumbPointerDown:x,onThumbPositionChange:u,onDragScroll:m,onWheelScroll:i,onResize:o,...v}=t,P=Z(ee,r),[k,L]=h.useState(null),H=ce(a,M=>L(M)),$=h.useRef(null),F=h.useRef(""),V=P.viewport,U=l.content-l.viewport,he=xe(i),re=xe(u),b=Be(o,10);function _(M){if($.current){const z=M.clientX-$.current.left,B=M.clientY-$.current.top;m({x:z,y:B})}}return h.useEffect(()=>{const M=z=>{const B=z.target;k?.contains(B)&&he(z,U)};return document.addEventListener("wheel",M,{passive:!1}),()=>document.removeEventListener("wheel",M,{passive:!1})},[V,k,U,he]),h.useEffect(re,[l,re]),be(k,b),be(P.content,b),e.jsx(Cr,{scope:r,scrollbar:k,hasThumb:s,onThumbChange:xe(d),onThumbPointerUp:xe(n),onThumbPositionChange:re,onThumbPointerDown:xe(x),children:e.jsx(pe.div,{...v,ref:H,style:{position:"absolute",...v.style},onPointerDown:ae(t.onPointerDown,M=>{M.button===0&&(M.target.setPointerCapture(M.pointerId),$.current=k.getBoundingClientRect(),F.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",P.viewport&&(P.viewport.style.scrollBehavior="auto"),_(M))}),onPointerMove:ae(t.onPointerMove,_),onPointerUp:ae(t.onPointerUp,M=>{const z=M.target;z.hasPointerCapture(M.pointerId)&&z.releasePointerCapture(M.pointerId),document.body.style.webkitUserSelect=F.current,P.viewport&&(P.viewport.style.scrollBehavior=""),$.current=null})})})}),Ee="ScrollAreaThumb",zt=h.forwardRef((t,a)=>{const{forceMount:r,...l}=t,s=Mt(Ee,t.__scopeScrollArea);return e.jsx(Re,{present:r||s.hasThumb,children:e.jsx(Nr,{ref:a,...l})})}),Nr=h.forwardRef((t,a)=>{const{__scopeScrollArea:r,style:l,...s}=t,d=Z(Ee,r),n=Mt(Ee,r),{onThumbPositionChange:x}=n,u=ce(a,o=>n.onThumbChange(o)),m=h.useRef(void 0),i=Be(()=>{m.current&&(m.current(),m.current=void 0)},100);return h.useEffect(()=>{const o=d.viewport;if(o){const v=()=>{if(i(),!m.current){const P=Er(o,x);m.current=P,x()}};return x(),o.addEventListener("scroll",v),()=>o.removeEventListener("scroll",v)}},[d.viewport,i,x]),e.jsx(pe.div,{"data-state":n.hasThumb?"visible":"hidden",...s,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...l},onPointerDownCapture:ae(t.onPointerDownCapture,o=>{const P=o.target.getBoundingClientRect(),k=o.clientX-P.left,L=o.clientY-P.top;n.onThumbPointerDown({x:k,y:L})}),onPointerUp:ae(t.onPointerUp,n.onThumbPointerUp)})});zt.displayName=Ee;var qe="ScrollAreaCorner",_t=h.forwardRef((t,a)=>{const r=Z(qe,t.__scopeScrollArea),l=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&l?e.jsx(kr,{...t,ref:a}):null});_t.displayName=qe;var kr=h.forwardRef((t,a)=>{const{__scopeScrollArea:r,...l}=t,s=Z(qe,r),[d,n]=h.useState(0),[x,u]=h.useState(0),m=!!(d&&x);return be(s.scrollbarX,()=>{const i=s.scrollbarX?.offsetHeight||0;s.onCornerHeightChange(i),u(i)}),be(s.scrollbarY,()=>{const i=s.scrollbarY?.offsetWidth||0;s.onCornerWidthChange(i),n(i)}),m?e.jsx(pe.div,{...l,ref:a,style:{width:d,height:x,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Te(t){return t?parseInt(t,10):0}function Dt(t,a){const r=t/a;return isNaN(r)?0:r}function De(t){const a=Dt(t.viewport,t.content),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,l=(t.scrollbar.size-r)*a;return Math.max(l,18)}function Sr(t,a,r,l="ltr"){const s=De(r),d=s/2,n=a||d,x=s-n,u=r.scrollbar.paddingStart+n,m=r.scrollbar.size-r.scrollbar.paddingEnd-x,i=r.content-r.viewport,o=l==="ltr"?[0,i]:[i*-1,0];return Bt([u,m],o)(t)}function ht(t,a,r="ltr"){const l=De(a),s=a.scrollbar.paddingStart+a.scrollbar.paddingEnd,d=a.scrollbar.size-s,n=a.content-a.viewport,x=d-l,u=r==="ltr"?[0,n]:[n*-1,0],m=hs(t,u);return Bt([0,n],[0,x])(m)}function Bt(t,a){return r=>{if(t[0]===t[1]||a[0]===a[1])return a[0];const l=(a[1]-a[0])/(t[1]-t[0]);return a[0]+l*(r-t[0])}}function Lt(t,a){return t>0&&t<a}var Er=(t,a=()=>{})=>{let r={left:t.scrollLeft,top:t.scrollTop},l=0;return(function s(){const d={left:t.scrollLeft,top:t.scrollTop},n=r.left!==d.left,x=r.top!==d.top;(n||x)&&a(),r=d,l=window.requestAnimationFrame(s)})(),()=>window.cancelAnimationFrame(l)};function Be(t,a){const r=xe(t),l=h.useRef(0);return h.useEffect(()=>()=>window.clearTimeout(l.current),[]),h.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(r,a)},[r,a])}function be(t,a){const r=xe(a);ss(()=>{let l=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(l),l=window.requestAnimationFrame(r)});return s.observe(t),()=>{window.cancelAnimationFrame(l),s.unobserve(t)}}},[t,r])}var Wt=Et,Tr=Rt,Rr=_t;const Ge=h.forwardRef(({className:t,children:a,...r},l)=>e.jsxs(Wt,{ref:l,className:ie("relative overflow-hidden",t),...r,children:[e.jsx(Tr,{className:"h-full w-full rounded-[inherit]",children:a}),e.jsx(It,{}),e.jsx(Rr,{})]}));Ge.displayName=Wt.displayName;const It=h.forwardRef(({className:t,orientation:a="vertical",...r},l)=>e.jsx(Ue,{ref:l,orientation:a,className:ie("flex touch-none select-none transition-colors",a==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",a==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...r,children:e.jsx(zt,{className:"relative flex-1 rounded-full bg-border"})}));It.displayName=Ue.displayName;var Pr=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Mr=Pr.reduce((t,a)=>{const r=rs(`Primitive.${a}`),l=h.forwardRef((s,d)=>{const{asChild:n,...x}=s,u=n?r:a;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(u,{...x,ref:d})});return l.displayName=`Primitive.${a}`,{...t,[a]:l}},{}),Ar="Separator",xt="horizontal",zr=["horizontal","vertical"],Yt=h.forwardRef((t,a)=>{const{decorative:r,orientation:l=xt,...s}=t,d=_r(l)?l:xt,x=r?{role:"none"}:{"aria-orientation":d==="vertical"?d:void 0,role:"separator"};return e.jsx(Mr.div,{"data-orientation":d,...x,...s,ref:a})});Yt.displayName=Ar;function _r(t){return zr.includes(t)}var $t=Yt;const W=h.forwardRef(({className:t,orientation:a="horizontal",decorative:r=!0,...l},s)=>e.jsx($t,{ref:s,decorative:r,orientation:a,className:ie("shrink-0 bg-border",a==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...l}));W.displayName=$t.displayName;const He="__no_tier__";function ue({children:t}){return e.jsx("h3",{className:"mb-2 text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:t})}function S({label:t,children:a}){return e.jsxs("div",{className:"grid grid-cols-[1fr_1fr] items-center gap-2",children:[e.jsx(E,{className:"text-xs",children:t}),a]})}function Dr({element:t}){const[a,r]=h.useState(!0),[l,s]=h.useState(!1),d=p(o=>o.updateElement),n=p(o=>o.removeElement),x=p(o=>o.setStartingPoint),u=p(o=>o.duplicateElements),m=p(o=>o.venue.tiers);h.useEffect(()=>{queueMicrotask(()=>{r(!0),s(!1)})},[t.id]);const i=o=>d(t.id,{...o,popupConfigured:!0});return e.jsxs("div",{className:"space-y-2.5",children:[e.jsx(S,{label:"Name",children:e.jsx(g,{value:t.name,onChange:o=>d(t.id,{name:o.target.value}),className:"h-8 text-xs"})}),e.jsx(S,{label:"Booth #",children:e.jsx(g,{value:t.boothNumber,onChange:o=>d(t.id,{boothNumber:o.target.value}),className:"h-8 text-xs"})}),e.jsx(S,{label:"Tier",children:e.jsxs(Pe,{value:t.tierId??He,onValueChange:o=>d(t.id,{tierId:o===He?void 0:o}),children:[e.jsx(Me,{className:"h-8 text-xs",children:e.jsx(Ae,{placeholder:"No tier"})}),e.jsxs(ze,{children:[e.jsx(ne,{value:He,className:"text-xs text-muted-foreground",children:"No tier"}),m.map(o=>e.jsx(ne,{value:o.id,className:"text-xs",children:o.name},o.id))]})]})}),e.jsxs("div",{className:"rounded-md border border-border/70 p-2.5 space-y-2",children:[e.jsxs("button",{type:"button",className:"flex w-full items-center justify-between",onClick:()=>{s(o=>!o),i({})},children:[e.jsx(E,{className:"cursor-pointer text-xs font-medium",children:"Popup Appearance"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:l?"Hide":"Show"})]}),l&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"rounded-md border border-border/60 p-2 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(E,{className:"text-xs",children:"Show Description"}),e.jsx(Y,{checked:t.showDescription,onCheckedChange:o=>i({showDescription:o})})]}),t.showDescription&&e.jsx(Fe,{value:t.description??"",onChange:o=>i({description:o.target.value}),className:"min-h-[60px] text-xs",rows:3})]}),e.jsxs("div",{className:"rounded-md border border-border/60 p-2 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(E,{className:"text-xs",children:"Visit Website"}),e.jsx(Y,{checked:t.showWebsiteCTA,onCheckedChange:o=>i({showWebsiteCTA:o})})]}),t.showWebsiteCTA&&e.jsxs(e.Fragment,{children:[e.jsx(g,{value:t.websiteUrl??"",onChange:o=>i({websiteUrl:o.target.value}),placeholder:"https://...",className:"h-8 text-xs"}),e.jsx(S,{label:"Text",children:e.jsx(g,{value:t.websiteCtaText??"Visit website",onChange:o=>i({websiteCtaText:o.target.value}),className:"h-8 text-xs"})}),e.jsx(S,{label:"Color",children:e.jsx(g,{type:"color",value:t.websiteCtaButtonColor??"#111827",onChange:o=>i({websiteCtaButtonColor:o.target.value}),className:"h-8 cursor-pointer p-1"})}),e.jsx(S,{label:"Text Color",children:e.jsx(g,{type:"color",value:t.websiteCtaTextColor??"#ffffff",onChange:o=>i({websiteCtaTextColor:o.target.value}),className:"h-8 cursor-pointer p-1"})}),e.jsx(S,{label:"Radius",children:e.jsx(g,{type:"number",min:0,max:24,value:t.websiteCtaRadius??10,onChange:o=>i({websiteCtaRadius:Number(o.target.value)}),className:"h-8 text-xs"})})]})]}),[{title:"Mark as Visited",show:t.showVisitedCTA,setShow:o=>i({showVisitedCTA:o}),text:t.visitedCtaText??"Mark as visited",setText:o=>i({visitedCtaText:o}),color:t.visitedCtaButtonColor??"#111827",setColor:o=>i({visitedCtaButtonColor:o}),textColor:t.visitedCtaTextColor??"#ffffff",setTextColor:o=>i({visitedCtaTextColor:o}),radius:t.visitedCtaRadius??10,setRadius:o=>i({visitedCtaRadius:o})},{title:"Mark as Favorite",show:t.showFavoriteCTA,setShow:o=>i({showFavoriteCTA:o}),text:t.favoriteCtaText??"Mark as favorite",setText:o=>i({favoriteCtaText:o}),color:t.favoriteCtaButtonColor??"#111827",setColor:o=>i({favoriteCtaButtonColor:o}),textColor:t.favoriteCtaTextColor??"#ffffff",setTextColor:o=>i({favoriteCtaTextColor:o}),radius:t.favoriteCtaRadius??10,setRadius:o=>i({favoriteCtaRadius:o})},{title:"Rate (5 star)",show:t.showRateCTA,setShow:o=>i({showRateCTA:o}),text:t.rateCtaText??"Rate",setText:o=>i({rateCtaText:o}),color:t.rateCtaButtonColor??"#111827",setColor:o=>i({rateCtaButtonColor:o}),textColor:t.rateCtaTextColor??"#ffffff",setTextColor:o=>i({rateCtaTextColor:o}),radius:t.rateCtaRadius??10,setRadius:o=>i({rateCtaRadius:o})},{title:"Get Direction",show:t.showDirectionCTA,setShow:o=>i({showDirectionCTA:o}),text:t.directionCtaText??"Get direction",setText:o=>i({directionCtaText:o}),color:t.directionCtaButtonColor??"#111827",setColor:o=>i({directionCtaButtonColor:o}),textColor:t.directionCtaTextColor??"#ffffff",setTextColor:o=>i({directionCtaTextColor:o}),radius:t.directionCtaRadius??10,setRadius:o=>i({directionCtaRadius:o})}].map(o=>e.jsxs("div",{className:"rounded-md border border-border/60 p-2 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(E,{className:"text-xs",children:o.title}),e.jsx(Y,{checked:o.show,onCheckedChange:o.setShow})]}),o.show&&e.jsxs(e.Fragment,{children:[e.jsx(S,{label:"Text",children:e.jsx(g,{value:o.text,onChange:v=>o.setText(v.target.value),className:"h-8 text-xs"})}),e.jsx(S,{label:"Color",children:e.jsx(g,{type:"color",value:o.color,onChange:v=>o.setColor(v.target.value),className:"h-8 cursor-pointer p-1"})}),e.jsx(S,{label:"Text Color",children:e.jsx(g,{type:"color",value:o.textColor,onChange:v=>o.setTextColor(v.target.value),className:"h-8 cursor-pointer p-1"})}),e.jsx(S,{label:"Radius",children:e.jsx(g,{type:"number",min:0,max:24,value:o.radius,onChange:v=>o.setRadius(Number(v.target.value)),className:"h-8 text-xs"})})]})]},o.title))]})]}),e.jsxs("div",{className:"rounded-md border border-border/70 p-2.5 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(E,{className:"text-xs font-medium",children:"Booth Appearance"}),e.jsx(Y,{checked:a,onCheckedChange:r})]}),a&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx(E,{className:"text-xs",children:"Logo URL"}),e.jsx(g,{value:t.logoUrl??"",onChange:o=>d(t.id,{logoUrl:o.target.value||void 0}),placeholder:"https://example.com/logo.png",className:"h-8 text-xs"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between rounded-md border border-border/60 px-2",children:[e.jsx(E,{className:"text-xs",children:"Fill"}),e.jsx(Y,{checked:t.fillEnabled!==!1,onCheckedChange:o=>d(t.id,{fillEnabled:o})})]}),e.jsx(g,{type:"color",value:t.fillColor??"#3b82f6",disabled:t.fillEnabled===!1,onChange:o=>d(t.id,{fillColor:o.target.value}),className:"h-8 cursor-pointer p-1 disabled:cursor-not-allowed"})]}),e.jsx(S,{label:"Border Color",children:e.jsx(g,{type:"color",value:t.borderColor??"#1f2937",onChange:o=>d(t.id,{borderColor:o.target.value}),className:"h-8 cursor-pointer p-1"})}),e.jsx(S,{label:"Border Width",children:e.jsx(g,{type:"number",min:0,max:12,value:t.borderWidth??1,onChange:o=>d(t.id,{borderWidth:Number(o.target.value)}),className:"h-8 text-xs"})}),t.shape==="square"&&e.jsx(S,{label:"Radius",children:e.jsx(g,{type:"number",min:0,max:Math.min(t.width,t.height)/2,value:t.borderRadius??10,onChange:o=>d(t.id,{borderRadius:Number(o.target.value)}),className:"h-8 text-xs"})}),e.jsx(S,{label:"Text Color",children:e.jsx(g,{type:"color",value:t.textColor,onChange:o=>d(t.id,{textColor:o.target.value}),className:"h-8 cursor-pointer p-1"})})]})]}),e.jsx(W,{}),e.jsx(ue,{children:"Dimensions"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{children:[e.jsx(E,{className:"text-xs",children:"Width"}),e.jsx(g,{type:"number",value:t.width,onChange:o=>d(t.id,{width:Number(o.target.value)}),className:"h-8 text-xs"})]}),e.jsxs("div",{children:[e.jsx(E,{className:"text-xs",children:"Height"}),e.jsx(g,{type:"number",value:t.height,onChange:o=>d(t.id,{height:Number(o.target.value)}),className:"h-8 text-xs"})]}),e.jsxs("div",{children:[e.jsx(E,{className:"text-xs",children:"Rotation"}),e.jsx(g,{type:"number",value:t.rotation,onChange:o=>d(t.id,{rotation:Number(o.target.value)}),className:"h-8 text-xs"})]})]}),e.jsx(S,{label:"X Position",children:e.jsx(g,{type:"number",value:Math.round(t.x),onChange:o=>d(t.id,{x:Number(o.target.value)}),className:"h-8 text-xs"})}),e.jsx(S,{label:"Y Position",children:e.jsx(g,{type:"number",value:Math.round(t.y),onChange:o=>d(t.id,{y:Number(o.target.value)}),className:"h-8 text-xs"})}),e.jsx(W,{}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{variant:"outline",size:"sm",className:"flex-1 text-xs",onClick:()=>x(t.id),children:[e.jsx(Oe,{className:"mr-1 h-3 w-3"})," Set Start"]}),e.jsxs(R,{variant:"outline",size:"sm",className:"flex-1 text-xs",onClick:()=>u([t.id]),children:[e.jsx(le,{className:"mr-1 h-3 w-3"})," Duplicate"]})]}),e.jsxs(R,{variant:"destructive",size:"sm",className:"w-full text-xs",onClick:()=>n(t.id),children:[e.jsx(de,{className:"mr-1 h-3 w-3"})," Delete"]})]})}function Br({element:t}){const a=p(s=>s.updateElement),r=p(s=>s.removeElement),l=p(s=>s.duplicateElements);return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(E,{className:"text-xs",children:"Text Content"}),e.jsx(Fe,{value:t.text,onChange:s=>a(t.id,{text:s.target.value}),className:"mt-1 min-h-[60px] text-xs",rows:3})]}),e.jsx(S,{label:"Font Size",children:e.jsx(g,{type:"number",value:t.fontSize,min:8,onChange:s=>a(t.id,{fontSize:Number(s.target.value)}),className:"h-8 text-xs"})}),e.jsx(S,{label:"Font Weight",children:e.jsxs(Pe,{value:t.fontWeight,onValueChange:s=>a(t.id,{fontWeight:s}),children:[e.jsx(Me,{className:"h-8 text-xs",children:e.jsx(Ae,{})}),e.jsxs(ze,{children:[e.jsx(ne,{value:"normal",children:"Normal"}),e.jsx(ne,{value:"bold",children:"Bold"})]})]})}),e.jsx(S,{label:"Fill Color",children:e.jsx(g,{type:"color",value:t.fillColor==="transparent"?"#ffffff":t.fillColor,onChange:s=>a(t.id,{fillColor:s.target.value}),className:"h-8 cursor-pointer p-1"})}),e.jsx(S,{label:"Text Color",children:e.jsx(g,{type:"color",value:t.textColor,onChange:s=>a(t.id,{textColor:s.target.value}),className:"h-8 cursor-pointer p-1"})}),e.jsx(W,{}),e.jsx(ue,{children:"Dimensions"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx(E,{className:"text-xs",children:"Width"}),e.jsx(g,{type:"number",value:t.width,onChange:s=>a(t.id,{width:Number(s.target.value)}),className:"h-8 text-xs"})]}),e.jsxs("div",{children:[e.jsx(E,{className:"text-xs",children:"Height"}),e.jsx(g,{type:"number",value:t.height,onChange:s=>a(t.id,{height:Number(s.target.value)}),className:"h-8 text-xs"})]})]}),e.jsx(S,{label:"Rotation",children:e.jsx(g,{type:"number",value:t.rotation,onChange:s=>a(t.id,{rotation:Number(s.target.value)}),className:"h-8 text-xs"})}),e.jsx(W,{}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{variant:"outline",size:"sm",className:"flex-1 text-xs",onClick:()=>l([t.id]),children:[e.jsx(le,{className:"mr-1 h-3 w-3"})," Duplicate"]}),e.jsxs(R,{variant:"destructive",size:"sm",className:"flex-1 text-xs",onClick:()=>r(t.id),children:[e.jsx(de,{className:"mr-1 h-3 w-3"})," Delete"]})]})]})}function Lr({element:t}){const a=p(s=>s.updateElement),r=p(s=>s.removeElement),l=p(s=>s.duplicateElements);return e.jsxs("div",{className:"space-y-3",children:[e.jsx(ue,{children:"Dimensions"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{children:[e.jsx(E,{className:"text-xs",children:"Width"}),e.jsx(g,{type:"number",value:t.width,onChange:s=>a(t.id,{width:Number(s.target.value)}),className:"h-8 text-xs"})]}),e.jsxs("div",{children:[e.jsx(E,{className:"text-xs",children:"Height"}),e.jsx(g,{type:"number",value:t.height,onChange:s=>a(t.id,{height:Number(s.target.value)}),className:"h-8 text-xs"})]}),e.jsxs("div",{children:[e.jsx(E,{className:"text-xs",children:"Rotation"}),e.jsx(g,{type:"number",value:t.rotation,onChange:s=>a(t.id,{rotation:Number(s.target.value)}),className:"h-8 text-xs"})]})]}),e.jsx(S,{label:"X Position",children:e.jsx(g,{type:"number",value:Math.round(t.x),onChange:s=>a(t.id,{x:Number(s.target.value)}),className:"h-8 text-xs"})}),e.jsx(S,{label:"Y Position",children:e.jsx(g,{type:"number",value:Math.round(t.y),onChange:s=>a(t.id,{y:Number(s.target.value)}),className:"h-8 text-xs"})}),e.jsx(W,{}),e.jsx(ue,{children:"Barricade appearance"}),e.jsxs("div",{className:"flex items-center justify-between rounded-md border p-2",children:[e.jsx(E,{className:"text-xs",children:"Fill"}),e.jsx(Y,{checked:t.fillEnabled!==!1,onCheckedChange:s=>a(t.id,{fillEnabled:s})})]}),e.jsx(S,{label:"Fill Color",children:e.jsx(g,{type:"color",value:t.fillColor,onChange:s=>a(t.id,{fillColor:s.target.value}),className:"h-8 cursor-pointer p-1"})}),e.jsx(S,{label:"Border Color",children:e.jsx(g,{type:"color",value:t.borderColor,onChange:s=>a(t.id,{borderColor:s.target.value}),className:"h-8 cursor-pointer p-1"})}),e.jsx(S,{label:"Border Width",children:e.jsx(g,{type:"number",value:t.borderWidth,min:0,onChange:s=>a(t.id,{borderWidth:Number(s.target.value)}),className:"h-8 text-xs"})}),e.jsx(S,{label:"Border Radius",children:e.jsx(g,{type:"number",value:t.borderRadius,min:0,onChange:s=>a(t.id,{borderRadius:Number(s.target.value)}),className:"h-8 text-xs"})}),e.jsx(W,{}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{variant:"outline",size:"sm",className:"flex-1 text-xs",onClick:()=>l([t.id]),children:[e.jsx(le,{className:"mr-1 h-3 w-3"})," Duplicate"]}),e.jsxs(R,{variant:"destructive",size:"sm",className:"flex-1 text-xs",onClick:()=>r(t.id),children:[e.jsx(de,{className:"mr-1 h-3 w-3"})," Delete"]})]})]})}function Wr({element:t}){const a=p(s=>s.updateElement),r=p(s=>s.removeElement),l=p(s=>s.duplicateElements);return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(E,{className:"text-xs",children:"Image URL"}),e.jsx(g,{value:t.imageUrl,onChange:s=>a(t.id,{imageUrl:s.target.value}),placeholder:"https://...",className:"h-8 text-xs"})]}),e.jsx(S,{label:"Opacity",children:e.jsx("input",{type:"range",min:0,max:1,step:.05,value:t.opacity,onChange:s=>a(t.id,{opacity:Number(s.target.value)}),className:"w-full"})}),e.jsx(W,{}),e.jsx(ue,{children:"Dimensions"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx(E,{className:"text-xs",children:"Width"}),e.jsx(g,{type:"number",value:t.width,onChange:s=>a(t.id,{width:Number(s.target.value)}),className:"h-8 text-xs"})]}),e.jsxs("div",{children:[e.jsx(E,{className:"text-xs",children:"Height"}),e.jsx(g,{type:"number",value:t.height,onChange:s=>a(t.id,{height:Number(s.target.value)}),className:"h-8 text-xs"})]})]}),e.jsx(S,{label:"Rotation",children:e.jsx(g,{type:"number",value:t.rotation,onChange:s=>a(t.id,{rotation:Number(s.target.value)}),className:"h-8 text-xs"})}),e.jsx(W,{}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{variant:"outline",size:"sm",className:"flex-1 text-xs",onClick:()=>l([t.id]),children:[e.jsx(le,{className:"mr-1 h-3 w-3"})," Duplicate"]}),e.jsxs(R,{variant:"destructive",size:"sm",className:"flex-1 text-xs",onClick:()=>r(t.id),children:[e.jsx(de,{className:"mr-1 h-3 w-3"})," Delete"]})]})]})}function Ir({element:t}){const a=p(s=>s.updateElement),r=p(s=>s.removeElement),l=p(s=>s.duplicateElements);return e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{label:"Type",children:e.jsxs(Pe,{value:t.connectorType,onValueChange:s=>a(t.id,{connectorType:s}),children:[e.jsx(Me,{className:"h-8 text-xs",children:e.jsx(Ae,{})}),e.jsxs(ze,{children:[e.jsx(ne,{value:"directional",children:"Directional"}),e.jsx(ne,{value:"bidirectional",children:"Bidirectional"}),e.jsx(ne,{value:"polyline",children:"Polyline"})]})]})}),e.jsx(S,{label:"Stroke Color",children:e.jsx(g,{type:"color",value:t.strokeColor,onChange:s=>a(t.id,{strokeColor:s.target.value}),className:"h-8 cursor-pointer p-1"})}),e.jsx(S,{label:"Stroke Width",children:e.jsx(g,{type:"number",value:t.strokeWidth,min:1,max:20,onChange:s=>a(t.id,{strokeWidth:Number(s.target.value)}),className:"h-8 text-xs"})}),e.jsx(W,{}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{variant:"outline",size:"sm",className:"flex-1 text-xs",onClick:()=>l([t.id]),children:[e.jsx(le,{className:"mr-1 h-3 w-3"})," Duplicate"]}),e.jsxs(R,{variant:"destructive",size:"sm",className:"flex-1 text-xs",onClick:()=>r(t.id),children:[e.jsx(de,{className:"mr-1 h-3 w-3"})," Delete"]})]})]})}function Yr({ids:t,booths:a}){const r=p(n=>n.updateElements),l=a[0];if(!l)return null;const s=a.every(n=>n.shape==="square"),d=n=>r(t,n);return e.jsxs(e.Fragment,{children:[e.jsx(W,{}),e.jsx(ue,{children:"Booth & Popup (common)"}),e.jsxs("div",{className:"space-y-3 rounded-md border border-border/70 p-2.5",children:[e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Apply to all ",a.length," booths. Booth and popup options shared across selection."]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Booth appearance"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between rounded-md border border-border/60 px-2",children:[e.jsx(E,{className:"text-xs",children:"Fill"}),e.jsx(Y,{checked:l.fillEnabled!==!1,onCheckedChange:n=>d({fillEnabled:n})})]}),e.jsx(g,{type:"color",value:l.fillColor??"#3b82f6",disabled:l.fillEnabled===!1,onChange:n=>d({fillColor:n.target.value}),className:"h-8 cursor-pointer p-1 disabled:cursor-not-allowed"})]}),e.jsx(S,{label:"Border Color",children:e.jsx(g,{type:"color",value:l.borderColor??"#1f2937",onChange:n=>d({borderColor:n.target.value}),className:"h-8 cursor-pointer p-1"})}),e.jsx(S,{label:"Border Width",children:e.jsx(g,{type:"number",min:0,max:12,value:l.borderWidth??1,onChange:n=>d({borderWidth:Number(n.target.value)}),className:"h-8 text-xs"})}),s&&e.jsx(S,{label:"Corner Radius",children:e.jsx(g,{type:"number",min:0,value:l.borderRadius??10,onChange:n=>d({borderRadius:Number(n.target.value)}),className:"h-8 text-xs"})}),e.jsx(S,{label:"Text Color",children:e.jsx(g,{type:"color",value:l.textColor,onChange:n=>d({textColor:n.target.value}),className:"h-8 cursor-pointer p-1"})})]}),e.jsxs("div",{className:"space-y-2 pt-2 border-t border-border/60",children:[e.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Popup appearance"}),e.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(E,{className:"text-xs",children:"Description"}),e.jsx(Y,{checked:l.showDescription,onCheckedChange:n=>d({showDescription:n,popupConfigured:!0})})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(E,{className:"text-xs",children:"Visit website"}),e.jsx(Y,{checked:l.showWebsiteCTA,onCheckedChange:n=>d({showWebsiteCTA:n,popupConfigured:!0})})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(E,{className:"text-xs",children:"Mark visited"}),e.jsx(Y,{checked:l.showVisitedCTA,onCheckedChange:n=>d({showVisitedCTA:n,popupConfigured:!0})})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(E,{className:"text-xs",children:"Favorite"}),e.jsx(Y,{checked:l.showFavoriteCTA,onCheckedChange:n=>d({showFavoriteCTA:n,popupConfigured:!0})})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(E,{className:"text-xs",children:"Rate"}),e.jsx(Y,{checked:l.showRateCTA,onCheckedChange:n=>d({showRateCTA:n,popupConfigured:!0})})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(E,{className:"text-xs",children:"Get direction"}),e.jsx(Y,{checked:l.showDirectionCTA,onCheckedChange:n=>d({showDirectionCTA:n,popupConfigured:!0})})]})]})]})]})]})}function $r({ids:t}){const a=p(l=>l.bringElementsToFront),r=p(l=>l.bringElementsToBack);return e.jsxs("div",{className:"mb-3 flex gap-2",children:[e.jsxs(R,{variant:"outline",size:"sm",className:"flex-1 text-xs",onClick:()=>a(t),title:"Bring selected in front of others",children:[e.jsx(ft,{className:"mr-1 h-3 w-3"}),"Bring to front"]}),e.jsxs(R,{variant:"outline",size:"sm",className:"flex-1 text-xs",onClick:()=>r(t),title:"Send selected behind others",children:[e.jsx(pt,{className:"mr-1 h-3 w-3"}),"Bring to back"]})]})}function Hr({elements:t}){const a=p(o=>o.updateElements),r=p(o=>o.removeElements),l=p(o=>o.duplicateElements),s=t.map(o=>o.id),d=t.every(o=>"width"in o&&"height"in o),n=t.every(o=>"x"in o&&"y"in o),x=t.every(o=>"rotation"in o),u=t.every(o=>"fillColor"in o),m=t.every(o=>"textColor"in o),i=t.length>0&&t.every(o=>o.type==="booth");return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"rounded-md bg-muted/50 p-2",children:[e.jsxs("p",{className:"text-xs font-medium",children:[t.length," elements selected"]}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Editing shared properties will apply to all selected elements."})]}),i&&e.jsx(Yr,{ids:s,booths:t}),d&&e.jsxs(e.Fragment,{children:[e.jsx(W,{}),e.jsx(ue,{children:"Dimensions"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx(E,{className:"text-xs",children:"Width"}),e.jsx(g,{type:"number",placeholder:"mixed",onChange:o=>{const v=Number(o.target.value);v>0&&a(s,{width:v})},className:"h-8 text-xs"})]}),e.jsxs("div",{children:[e.jsx(E,{className:"text-xs",children:"Height"}),e.jsx(g,{type:"number",placeholder:"mixed",onChange:o=>{const v=Number(o.target.value);v>0&&a(s,{height:v})},className:"h-8 text-xs"})]})]})]}),n&&e.jsxs(e.Fragment,{children:[e.jsx(S,{label:"X Position",children:e.jsx(g,{type:"number",placeholder:"mixed",onChange:o=>a(s,{x:Number(o.target.value)}),className:"h-8 text-xs"})}),e.jsx(S,{label:"Y Position",children:e.jsx(g,{type:"number",placeholder:"mixed",onChange:o=>a(s,{y:Number(o.target.value)}),className:"h-8 text-xs"})})]}),x&&e.jsx(S,{label:"Rotation",children:e.jsx(g,{type:"number",placeholder:"mixed",onChange:o=>a(s,{rotation:Number(o.target.value)}),className:"h-8 text-xs"})}),u&&e.jsx(S,{label:"Fill Color",children:e.jsx(g,{type:"color",onChange:o=>a(s,{fillColor:o.target.value}),className:"h-8 cursor-pointer p-1"})}),m&&e.jsx(S,{label:"Text Color",children:e.jsx(g,{type:"color",onChange:o=>a(s,{textColor:o.target.value}),className:"h-8 cursor-pointer p-1"})}),e.jsx(W,{}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{variant:"outline",size:"sm",className:"flex-1 text-xs",onClick:()=>l(s),children:[e.jsx(le,{className:"mr-1 h-3 w-3"})," Duplicate"]}),e.jsxs(R,{variant:"destructive",size:"sm",className:"flex-1 text-xs",onClick:()=>r(s),children:[e.jsx(de,{className:"mr-1 h-3 w-3"})," Delete All"]})]})]})}function Xr({element:t,elements:a}){const r=p(l=>l.setSelectedElement);return e.jsxs("div",{className:"mb-3",children:[e.jsx(E,{className:"text-xs",children:"Selected Element"}),e.jsxs(Pe,{value:t.id,onValueChange:l=>r(l),children:[e.jsx(Me,{className:"mt-1 h-8 text-xs",children:e.jsx(Ae,{})}),e.jsx(ze,{children:a.map(l=>e.jsx(ne,{value:l.id,className:"text-xs",children:l.type==="booth"?`${l.name} (#${l.boothNumber})`:l.type==="text"?l.text.slice(0,25):l.type==="image"?"Image":l.type==="barricade"?"Barricade":`Connector (${l.connectorType})`},l.id))})]})]})}function Or(){return e.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 py-12 text-center",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-muted",children:e.jsx(Is,{className:"h-5 w-5 text-muted-foreground"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:"No element selected"}),e.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Click an element on the canvas or select from the elements list."})]})]})}function Fr(){const t=p(n=>n.selectedElementIds),a=p(n=>n.elements),r=t.map(n=>a.find(x=>x.id===n)).filter(Boolean),l=r.length>1,s=r.length===1?r[0]:null,d=l?`${r.length} Elements`:s?`${s.type.charAt(0).toUpperCase()+s.type.slice(1)} Properties`:"Properties";return e.jsxs("aside",{className:"flex w-72 flex-col border-r border-border bg-background [&_button]:text-[12px] [&_h2]:text-[12px] [&_h3]:text-[12px] [&_input]:text-[12px] [&_label]:text-[12px] [&_p]:text-[12px] [&_span]:text-[12px] [&_textarea]:text-[12px]",children:[e.jsx("div",{className:"flex h-10 shrink-0 items-center border-b border-border px-4",children:e.jsx("h2",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:d})}),e.jsx(Ge,{className:"flex-1",children:e.jsxs("div",{className:"p-4",children:[r.length>0&&e.jsxs(e.Fragment,{children:[e.jsx($r,{ids:t}),e.jsx(W,{className:"mb-3"})]}),l&&e.jsx(Hr,{elements:r}),s&&e.jsxs(e.Fragment,{children:[e.jsx(Xr,{element:s,elements:a}),s.type==="booth"&&e.jsx(Dr,{element:s}),s.type==="text"&&e.jsx(Br,{element:s}),s.type==="image"&&e.jsx(Wr,{element:s}),s.type==="barricade"&&e.jsx(Lr,{element:s}),s.type==="connector"&&e.jsx(Ir,{element:s})]}),r.length===0&&e.jsx(Or,{})]})})]})}const Vr=[{tool:"select",icon:e.jsx(Ls,{className:"h-4 w-4"}),label:"Select"},{tool:"text",icon:e.jsx(bt,{className:"h-4 w-4"}),label:"Text"},{tool:"booth-circle",icon:e.jsx(Cs,{className:"h-4 w-4"}),label:"Circle Booth"},{tool:"booth-square",icon:e.jsx(vt,{className:"h-4 w-4"}),label:"Square Booth"},{tool:"image",icon:e.jsx(mt,{className:"h-4 w-4"}),label:"Image"},{tool:"barricade",icon:e.jsx(gt,{className:"h-4 w-4"}),label:"Barricade"}];function Ce({children:t}){return e.jsx("h3",{className:"mb-2 text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:t})}function Se({label:t,children:a}){return e.jsxs("div",{className:"grid grid-cols-[1fr_1fr] items-center gap-2",children:[e.jsx(E,{className:"text-xs",children:t}),a]})}function Ur(){const t=p(r=>r.activeTool),a=p(r=>r.setActiveTool);return e.jsxs("div",{children:[e.jsx(Ce,{children:"Tools"}),e.jsx(Xe,{delayDuration:200,children:e.jsx("div",{className:"grid grid-cols-6 gap-2",children:Vr.map(({tool:r,icon:l,label:s})=>e.jsxs(K,{children:[e.jsx(q,{asChild:!0,children:e.jsx(R,{variant:t===r?"default":"outline",size:"icon",className:ie("h-9 w-9 cursor-pointer",t===r&&"ring-2 ring-primary/30"),onClick:()=>a(r),children:l})}),e.jsxs(G,{side:"bottom",children:[s,r==="select"&&e.jsx("span",{className:"ml-1 text-muted-foreground",children:"(V)"})]})]},r))})})]})}const Kr={booth:e.jsx(vt,{className:"h-3.5 w-3.5 text-blue-500"}),text:e.jsx(bt,{className:"h-3.5 w-3.5 text-amber-500"}),image:e.jsx(mt,{className:"h-3.5 w-3.5 text-emerald-500"}),barricade:e.jsx(gt,{className:"h-3.5 w-3.5 text-slate-500"}),connector:e.jsx(Gs,{className:"h-3.5 w-3.5 text-purple-500"})};function qr(t){switch(t.type){case"booth":return`${t.name} (#${t.boothNumber})`;case"text":return t.text.length>20?t.text.slice(0,20)+"â€¦":t.text;case"image":return"Image";case"barricade":return"Barricade";case"connector":return`Connector (${t.connectorType})`}}function Gr(){const t=p(i=>i.elements),a=p(i=>i.selectedElementIds),r=p(i=>i.setSelectedElement),l=p(i=>i.toggleSelectedElement),s=p(i=>i.duplicateElements),d=p(i=>i.removeElements),n=p(i=>i.removeElement),x=p(i=>i.bringElementsToFront),u=p(i=>i.bringElementsToBack),m=h.useCallback((i,o)=>{o.ctrlKey||o.metaKey||o.shiftKey?l(i):r(i)},[r,l]);return e.jsxs("div",{children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsx(Ce,{children:e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(zs,{className:"h-3 w-3"}),"Elements (",t.length,")"]})}),a.length>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs(K,{children:[e.jsx(q,{asChild:!0,children:e.jsx(R,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>x(a),children:e.jsx(ft,{className:"h-3 w-3"})})}),e.jsx(G,{side:"bottom",children:"Bring to front"})]}),e.jsxs(K,{children:[e.jsx(q,{asChild:!0,children:e.jsx(R,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>u(a),children:e.jsx(pt,{className:"h-3 w-3"})})}),e.jsx(G,{side:"bottom",children:"Bring to back"})]}),e.jsxs(K,{children:[e.jsx(q,{asChild:!0,children:e.jsx(R,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>s(a),children:e.jsx(le,{className:"h-3 w-3"})})}),e.jsxs(G,{side:"bottom",children:["Duplicate selected ",e.jsx("span",{className:"text-muted-foreground",children:"Ctrl+D"})]})]}),e.jsxs(K,{children:[e.jsx(q,{asChild:!0,children:e.jsx(R,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive hover:text-destructive",onClick:()=>{a.length>1?d(a):n(a[0])},children:e.jsx(de,{className:"h-3 w-3"})})}),e.jsx(G,{side:"bottom",children:"Delete selected"})]})]})]}),t.length===0?e.jsx("p",{className:"text-xs text-muted-foreground",children:"No elements yet. Use tools above to add."}):e.jsx("div",{className:"space-y-0.5 max-h-48 overflow-y-auto",children:t.map(i=>{const o=a.includes(i.id);return e.jsxs("div",{className:ie("flex items-center gap-2 rounded-md px-2 py-1.5 text-xs cursor-pointer transition-colors",o?"bg-primary/10 text-primary ring-1 ring-primary/20":"hover:bg-muted/80 text-foreground"),onClick:v=>m(i.id,v),children:[Kr[i.type],e.jsx("span",{className:"flex-1 truncate",children:qr(i)}),i.type==="booth"&&i.isStartingPoint&&e.jsx(Oe,{className:"h-3 w-3 text-red-500 shrink-0"}),e.jsx(R,{variant:"ghost",size:"icon",className:"h-5 w-5 shrink-0 opacity-0 group-hover:opacity-100 hover:opacity-100",style:{opacity:o?.7:void 0},onClick:v=>{v.stopPropagation(),s([i.id])},children:e.jsx(le,{className:"h-2.5 w-2.5"})})]},i.id)})}),a.length>1&&e.jsxs("p",{className:"mt-1.5 text-[10px] text-muted-foreground",children:[a.length," elements selected â€” Ctrl/Shift+click to multi-select"]})]})}function Zr(){const t=p(r=>r.venue),a=p(r=>r.setVenue);return e.jsxs("div",{className:"space-y-3",children:[e.jsx(Ce,{children:"Canvas Settings"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx(E,{className:"text-xs",children:"Width"}),e.jsx(g,{type:"number",value:t.width,onChange:r=>a({width:Number(r.target.value)}),className:"h-8 text-xs"})]}),e.jsxs("div",{children:[e.jsx(E,{className:"text-xs",children:"Height"}),e.jsx(g,{type:"number",value:t.height,onChange:r=>a({height:Number(r.target.value)}),className:"h-8 text-xs"})]})]}),e.jsxs("div",{children:[e.jsx(E,{className:"text-xs",children:"Grid Size"}),e.jsx(g,{type:"number",value:t.gridSize,min:5,onChange:r=>a({gridSize:Number(r.target.value)}),className:"h-8 text-xs"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(E,{className:"text-xs",children:"Show Grid"}),e.jsx(Y,{checked:t.showGrid,onCheckedChange:r=>a({showGrid:r})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(E,{className:"text-xs",children:"Snap to Grid"}),e.jsx(Y,{checked:t.snapToGrid,onCheckedChange:r=>a({snapToGrid:r})})]}),e.jsx(Se,{label:"Background",children:e.jsx(g,{type:"color",value:t.backgroundColor,onChange:r=>a({backgroundColor:r.target.value}),className:"h-8 w-full cursor-pointer p-1"})}),e.jsxs("div",{children:[e.jsx(E,{className:"text-xs",children:"Background Image URL"}),e.jsx(g,{value:t.backgroundImage??"",onChange:r=>a({backgroundImage:r.target.value||void 0}),placeholder:"https://...",className:"h-8 text-xs"})]}),t.backgroundImage&&e.jsxs(e.Fragment,{children:[e.jsx(Se,{label:"Background rotation (Â°)",children:e.jsx(g,{type:"number",value:t.backgroundRotation??0,onChange:r=>a({backgroundRotation:Number(r.target.value)}),className:"h-8 text-xs"})}),e.jsx(Se,{label:"Background opacity",children:e.jsx(g,{type:"number",min:0,max:1,step:.1,value:t.backgroundOpacity??1,onChange:r=>a({backgroundOpacity:Number(r.target.value)}),className:"h-8 text-xs"})}),e.jsx(Se,{label:"Background zoom",children:e.jsx(g,{type:"number",min:.1,max:3,step:.1,value:t.backgroundZoom??1,onChange:r=>a({backgroundZoom:Number(r.target.value)}),placeholder:"1 = 100%",className:"h-8 text-xs"})})]})]})}const Jr=["glow","scale","sparkle","shadow"],Qr=["glow","scale","sparkle","shadow"];function eo({tierId:t,open:a,onOpenChange:r}){const l=p(i=>i.venue.tiers),s=p(i=>i.updateTier),d=t?l.find(i=>i.id===t)??null:null;if(!d)return null;const n=d.boothStyle??{},x=d.popupStyle??{},u=(i,o)=>s(d.id,{boothStyle:{...n,[i]:o}}),m=(i,o)=>s(d.id,{popupStyle:{...x,[i]:o}});return e.jsx(xs,{open:a,onOpenChange:r,children:e.jsxs(us,{className:"sm:max-w-md",children:[e.jsxs(ps,{children:[e.jsxs(fs,{children:["Tier: ",d.name]}),e.jsx(ms,{children:"These styles apply to all booths with this tier. Booth appearance affects the map; popup appearance affects the detail card."})]}),e.jsxs("div",{className:"grid gap-6 py-2",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(E,{className:"text-sm font-medium",children:"Booth appearance (on map)"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:Jr.map(i=>e.jsxs("div",{className:"flex items-center justify-between rounded-md border p-3",children:[e.jsxs("span",{className:"text-xs",children:[i==="glow"&&"Glowing effect",i==="scale"&&"Scaling effect",i==="sparkle"&&"Sparkling",i==="shadow"&&"Shadow effect"]}),e.jsx(Y,{checked:!!n[i],onCheckedChange:o=>u(i,o)},`booth-switch-${i}`)]},`booth-${i}`))})]}),e.jsx(W,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(E,{className:"text-sm font-medium",children:"Popup details appearance"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:Qr.map(i=>e.jsxs("div",{className:"flex items-center justify-between rounded-md border p-3",children:[e.jsxs("span",{className:"text-xs",children:[i==="glow"&&"Glowing effect",i==="scale"&&"Scaling effect",i==="sparkle"&&"Sparkling",i==="shadow"&&"Shadow effect"]}),e.jsx(Y,{checked:!!x[i],onCheckedChange:o=>m(i,o)},`popup-switch-${i}`)]},`popup-${i}`))})]})]})]},t??"dialog")})}function to(){const t=p(n=>n.venue.tiers),a=p(n=>n.addTier),r=p(n=>n.updateTier),l=p(n=>n.removeTier),[s,d]=h.useState(null);return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"mb-1 flex items-center justify-between",children:[e.jsx(Ce,{children:"Booth Tiers"}),e.jsxs(R,{variant:"outline",size:"sm",className:"h-7 px-2 text-xs",onClick:a,children:[e.jsx(Os,{className:"mr-1 h-3 w-3"}),"Add"]})]}),e.jsx("div",{className:"space-y-1.5",children:t.map((n,x)=>e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(g,{value:n.name,onChange:u=>r(n.id,{name:u.target.value}),className:"h-8 flex-1 text-xs",placeholder:`Tier ${x+1}`}),e.jsx(R,{variant:"ghost",size:"icon",className:"h-8 w-8 shrink-0",onClick:()=>d(n),title:"Customize tier appearance",children:e.jsx($s,{className:"h-3.5 w-3.5 text-muted-foreground"})}),e.jsx(R,{variant:"ghost",size:"icon",className:"h-8 w-8 shrink-0 text-destructive hover:text-destructive",disabled:t.length<=1,onClick:()=>l(n.id),title:t.length<=1?"Keep at least one tier":"Delete tier",children:e.jsx(de,{className:"h-3.5 w-3.5"})})]},n.id))}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Tier is optional per booth. Use Customize (palette) for glow, scale, sparkle, shadow."}),e.jsx(eo,{tierId:s?.id??null,open:!!s,onOpenChange:n=>!n&&d(null)})]})}function so(){const{projectName:t=""}=os(),a=h.useRef(null),r=p(k=>k.getConfig),l=p(k=>k.loadConfig),s=p(k=>k.resetAll),d=p(k=>k.setPreviewMode),n=p(k=>k.setPreviewAsKiosk),x=p(k=>k.undo),u=p(k=>k.redo),m=p(k=>k.past.length>0),i=p(k=>k.future.length>0),o=h.useCallback(async()=>{const k=r(),L=t.trim().toLowerCase();if(!L){alert("Missing project name in route. Open via /admin/:projectName.");return}as(L,k);try{await ns(L,k)}catch(H){console.error(H),alert("Failed to save manifest file.")}},[r,t]),v=h.useCallback(k=>{const L=k.target.files?.[0];if(!L)return;const H=new FileReader;H.onload=()=>{try{const $=JSON.parse(H.result);l($)}catch{alert("Invalid JSON file")}},H.readAsText(L),k.target.value=""},[l]),P=h.useCallback(()=>{window.confirm("Reset all elements, paths, and settings? This cannot be undone.")&&s()},[s]);return e.jsx(Xe,{delayDuration:200,children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs(K,{children:[e.jsx(q,{asChild:!0,children:e.jsx(R,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:x,disabled:!m,"aria-label":"Undo",children:e.jsx(tr,{className:"h-3.5 w-3.5"})})}),e.jsx(G,{children:"Undo"})]}),e.jsxs(K,{children:[e.jsx(q,{asChild:!0,children:e.jsx(R,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:u,disabled:!i,"aria-label":"Redo",children:e.jsx(Vs,{className:"h-3.5 w-3.5"})})}),e.jsx(G,{children:"Redo"})]}),e.jsxs(K,{children:[e.jsx(q,{asChild:!0,children:e.jsx(R,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>{n(!1),d(!0)},"aria-label":"Preview user mode",children:e.jsx(Ts,{className:"h-3.5 w-3.5"})})}),e.jsxs(G,{children:["Preview (User) ",e.jsx("span",{className:"text-muted-foreground",children:"Alt+P"})]})]}),e.jsxs(K,{children:[e.jsx(q,{asChild:!0,children:e.jsx(R,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>{n(!0),d(!0)},"aria-label":"Preview kiosk mode",children:e.jsx(Ds,{className:"h-3.5 w-3.5"})})}),e.jsxs(G,{children:["Preview (Kiosk) ",e.jsx("span",{className:"text-muted-foreground",children:"Alt+K"})]})]}),e.jsxs(K,{children:[e.jsx(q,{asChild:!0,children:e.jsx(R,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>{o()},"aria-label":"Save venue",children:e.jsx(Ss,{className:"h-3.5 w-3.5"})})}),e.jsx(G,{children:"Save Venue"})]}),e.jsxs(K,{children:[e.jsx(q,{asChild:!0,children:e.jsx(R,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>a.current?.click(),"aria-label":"Import manifest",children:e.jsx(rr,{className:"h-3.5 w-3.5"})})}),e.jsx(G,{children:"Import"})]}),e.jsxs(K,{children:[e.jsx(q,{asChild:!0,children:e.jsx(R,{variant:"destructive",size:"icon",className:"h-8 w-8 text-white",onClick:P,"aria-label":"Reset all",children:e.jsx(Ks,{className:"h-3.5 w-3.5"})})}),e.jsx(G,{children:"Reset All"})]}),e.jsx("input",{ref:a,type:"file",accept:".json",className:"hidden",onChange:v})]})})}function ro(){const t=p(r=>r.activityHistory),a=h.useMemo(()=>t.slice(0,10),[t]);return e.jsxs("div",{children:[e.jsx(Ce,{children:e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(Ps,{className:"h-3 w-3"}),"Activity History"]})}),a.length===0?e.jsx("p",{className:"text-xs text-muted-foreground",children:"No activity yet."}):e.jsx("div",{className:"max-h-36 space-y-1 overflow-y-auto rounded-md border border-border/60 p-2",children:a.map(r=>e.jsxs("div",{className:"flex items-center justify-between gap-2 text-[11px]",children:[e.jsx("span",{className:"truncate text-foreground",children:r.label}),e.jsx("span",{className:"shrink-0 text-muted-foreground",children:new Date(r.at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},r.id))})]})}function oo(){return e.jsxs("aside",{className:"flex w-72 flex-col border-l border-border bg-background [&_button]:text-[12px] [&_h2]:text-[12px] [&_h3]:text-[12px] [&_input]:text-[12px] [&_label]:text-[12px] [&_p]:text-[12px] [&_span]:text-[12px]",children:[e.jsx("div",{className:"shrink-0 border-b border-border px-4 py-2",children:e.jsx("h2",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:"Elements & Canvas"})}),e.jsx(Ge,{className:"flex-1",children:e.jsxs("div",{className:"space-y-5 p-4",children:[e.jsx(Ur,{}),e.jsx(W,{}),e.jsx(Xe,{delayDuration:200,children:e.jsx(Gr,{})}),e.jsx(W,{}),e.jsx(Zr,{}),e.jsx(W,{}),e.jsx(to,{}),e.jsx(W,{}),e.jsx(ro,{})]})})]})}function ao(){const t=p(a=>a.venue);return e.jsxs("header",{className:"flex h-12 shrink-0 items-center justify-between gap-3 border-b border-border bg-background px-4 text-[12px]",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-[12px] font-semibold tracking-tight",children:"Venue Builder"}),e.jsxs("span",{className:"text-[12px] text-muted-foreground",children:[t.width," Ã— ",t.height]})]}),e.jsx("div",{className:"flex min-w-0 items-center justify-end overflow-x-auto",children:e.jsx(so,{})})]})}function co(){const t=p(s=>s.isPreviewMode),a=p(s=>s.previewAsKiosk),r=p(s=>s.setPreviewMode),l=p(s=>s.getConfig);if(t){const s=l();return e.jsxs("div",{className:"relative h-screen w-screen",children:[e.jsx(gs,{isKiosk:a,config:s}),e.jsxs(R,{variant:"destructive",size:"sm",className:"absolute right-4 top-4 z-50 shadow-lg",onClick:()=>r(!1),children:[e.jsx(vs,{className:"mr-1 h-4 w-4"})," Exit Preview"]})]})}return e.jsxs("div",{className:"flex h-screen flex-col overflow-hidden",children:[e.jsx(ao,{}),e.jsx(no,{})]})}function no(){return bs(),e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsx(Fr,{}),e.jsx(hr,{}),e.jsx(oo,{})]})}export{co as AdminApp};

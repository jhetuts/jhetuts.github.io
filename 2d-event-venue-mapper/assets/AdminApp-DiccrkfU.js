import{j as e,r as x,u as f,c as ne,a as le,b as qt,P as ue,d as oe,e as Zt,f as ct,g as Se,h as xe,i as Jt,k as Qt,L as E,I as v,B as M,T as Ie,l as es,s as ts,m as ss,n as q,o as Z,p as J}from"./index-C4fStPi9.js";import{c as z,M as $e,s as ot,i as Le,g as be,a as rs,B as os,u as as,b as ns,d as is,S as Ee,e as Te,f as Re,h as Pe,j as ae,D as ls,k as cs,l as ds,m as hs,n as xs,V as us,X as ps}from"./ViewerApp-Aw2EmB33.js";const fs=[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]],ms=z("arrow-left-right",fs);const gs=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],vs=z("arrow-right",gs);const bs=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],js=z("circle",bs);const ys=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],ie=z("copy",ys);const ws=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Cs=z("download",ws);const Ns=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ks=z("eye",Ns);const Ss=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Es=z("history",Ss);const Ts=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],dt=z("image",Ts);const Rs=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Ps=z("layers",Rs);const Ms=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],As=z("monitor",Ms);const _s=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],zs=z("mouse-pointer-2",_s);const Ds=[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]],Bs=z("mouse-pointer-click",Ds);const Ls=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Ws=z("palette",Ls);const Is=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"m9 16 3-3 3 3",key:"1idcnm"}]],ht=z("panel-top-close",Is);const $s=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Hs=z("plus",$s);const Ys=[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]],Xs=z("redo-2",Ys);const Os=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Us=z("rotate-ccw",Os);const Vs=[["circle",{cx:"19",cy:"5",r:"2",key:"mhkx31"}],["circle",{cx:"5",cy:"19",r:"2",key:"v8kfzx"}],["path",{d:"M5 17A12 12 0 0 1 17 5",key:"1okkup"}]],xt=z("spline",Vs);const Fs=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],ut=z("square",Fs);const Ks=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ce=z("trash-2",Ks);const Gs=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],pt=z("type",Gs);const qs=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],Zs=z("undo-2",qs);const Js=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Qs=z("upload",Js);function er({gridSize:t}){return e.jsx("defs",{children:e.jsx("pattern",{id:"admin-grid-pattern",width:t,height:t,patternUnits:"userSpaceOnUse",children:e.jsx("path",{d:`M ${t} 0 L 0 0 0 ${t}`,fill:"none",stroke:"#cbd5e1",strokeWidth:"1",opacity:"0.8"})})})}function tr({element:t,isSelected:o,onSelect:r}){const i=t.x+t.width/2,s=t.y+t.height/2,[d,c]=x.useState(!0),u=!!t.logoUrl&&d,h=6,m=t.width-h*2,n=t.height-h*2;return e.jsxs("g",{onClick:a=>{a.stopPropagation(),r(t.id,a)},style:{cursor:"pointer"},transform:t.rotation?`rotate(${t.rotation} ${i} ${s})`:void 0,children:[t.shape==="circle"?e.jsxs(e.Fragment,{children:[e.jsx("ellipse",{cx:i,cy:s,rx:t.width/2,ry:t.height/2,fill:t.fillEnabled!==!1?t.fillColor:"transparent",stroke:t.borderColor??"#1f2937",strokeWidth:t.borderWidth??1}),o&&e.jsx("ellipse",{cx:i,cy:s,rx:t.width/2+2,ry:t.height/2+2,fill:"none",stroke:"#3b82f6",strokeWidth:2,strokeDasharray:"6 3"}),u&&e.jsx("clipPath",{id:`clip-logo-${t.id}`,children:e.jsx("ellipse",{cx:i,cy:s,rx:m/2,ry:n/2})})]}):e.jsxs(e.Fragment,{children:[e.jsx("rect",{x:t.x,y:t.y,width:t.width,height:t.height,rx:Math.max(0,t.borderRadius??10),fill:t.fillEnabled!==!1?t.fillColor:"transparent",stroke:t.borderColor??"#1f2937",strokeWidth:t.borderWidth??1}),o&&e.jsx("rect",{x:t.x-2,y:t.y-2,width:t.width+4,height:t.height+4,rx:Math.max(0,(t.borderRadius??10)+2),fill:"none",stroke:"#3b82f6",strokeWidth:2,strokeDasharray:"6 3"}),u&&e.jsx("clipPath",{id:`clip-logo-${t.id}`,children:e.jsx("rect",{x:t.x+h,y:t.y+h,width:m,height:n,rx:Math.max(0,(t.borderRadius??10)-2)})})]}),u?e.jsx("image",{href:t.logoUrl,x:t.x+h,y:t.y+h,width:m,height:n,preserveAspectRatio:"xMidYMid meet",clipPath:`url(#clip-logo-${t.id})`,pointerEvents:"none",onError:()=>c(!1)}):e.jsxs(e.Fragment,{children:[e.jsx("text",{x:i,y:s-6,textAnchor:"middle",dominantBaseline:"middle",fill:t.textColor,fontSize:12,fontWeight:"600",pointerEvents:"none",children:t.name}),e.jsxs("text",{x:i,y:s+8,textAnchor:"middle",dominantBaseline:"middle",fill:t.textColor,fontSize:10,opacity:.7,pointerEvents:"none",children:["#",t.boothNumber]})]}),t.isStartingPoint&&e.jsx("foreignObject",{x:i-10,y:t.y-22,width:20,height:20,pointerEvents:"none",children:e.jsx($e,{className:"h-5 w-5 text-red-500"})})]})}function sr({element:t,isSelected:o,onSelect:r}){const i=t.x+t.width/2,s=t.y+t.height/2;return e.jsxs("g",{onClick:d=>{d.stopPropagation(),r(t.id,d)},style:{cursor:"pointer"},transform:t.rotation?`rotate(${t.rotation} ${i} ${s})`:void 0,children:[o&&e.jsx("rect",{x:t.x,y:t.y,width:t.width,height:t.height,fill:"transparent",stroke:"#3b82f6",strokeWidth:2,strokeDasharray:"6 3"}),e.jsx("foreignObject",{x:t.x,y:t.y,width:t.width,height:t.height,children:e.jsx("div",{style:{fontSize:t.fontSize,fontWeight:t.fontWeight,color:t.textColor,backgroundColor:t.fillColor==="transparent"?void 0:t.fillColor,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",padding:"4px"},children:t.text})})]})}function rr({element:t,isSelected:o,onSelect:r}){const i=t.x+t.width/2,s=t.y+t.height/2;return e.jsxs("g",{onClick:d=>{d.stopPropagation(),r(t.id,d)},style:{cursor:"pointer"},transform:t.rotation?`rotate(${t.rotation} ${i} ${s})`:void 0,children:[e.jsx("image",{href:t.imageUrl,x:t.x,y:t.y,width:t.width,height:t.height,opacity:t.opacity,preserveAspectRatio:"xMidYMid slice"}),o&&e.jsx("rect",{x:t.x,y:t.y,width:t.width,height:t.height,fill:"transparent",stroke:"#3b82f6",strokeWidth:2,strokeDasharray:"6 3"})]})}function or({element:t,isSelected:o,onSelect:r}){const i=t.x+t.width/2,s=t.y+t.height/2;return e.jsxs("g",{onClick:d=>{d.stopPropagation(),r(t.id,d)},style:{cursor:"pointer"},transform:t.rotation?`rotate(${t.rotation} ${i} ${s})`:void 0,children:[e.jsx("rect",{x:t.x,y:t.y,width:t.width,height:t.height,rx:Math.max(0,t.borderRadius??4),fill:t.fillEnabled!==!1?t.fillColor:"transparent",stroke:t.borderColor??"#64748b",strokeWidth:t.borderWidth??2}),o&&e.jsx("rect",{x:t.x-2,y:t.y-2,width:t.width+4,height:t.height+4,rx:Math.max(0,(t.borderRadius??4)+2),fill:"none",stroke:"#3b82f6",strokeWidth:2,strokeDasharray:"6 3"})]})}function ar({element:t,isSelected:o,onSelect:r}){if(t.points.length<2)return null;const i=`arrow-${t.id}`,s=t.points.map(h=>`${h.x},${h.y}`).join(" "),d=t.connectorType==="directional",c=t.connectorType==="bidirectional",u=`arrow-start-${t.id}`;return e.jsxs("g",{onClick:h=>{h.stopPropagation(),r(t.id,h)},style:{cursor:"pointer"},children:[e.jsxs("defs",{children:[(d||c)&&e.jsx("marker",{id:i,viewBox:"0 0 10 7",refX:"10",refY:"3.5",markerWidth:"8",markerHeight:"6",orient:"auto-start-reverse",children:e.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:t.strokeColor})}),c&&e.jsx("marker",{id:u,viewBox:"0 0 10 7",refX:"0",refY:"3.5",markerWidth:"8",markerHeight:"6",orient:"auto-start-reverse",children:e.jsx("polygon",{points:"10 0, 0 3.5, 10 7",fill:t.strokeColor})})]}),o&&e.jsx("polyline",{points:s,fill:"none",stroke:"#3b82f6",strokeWidth:t.strokeWidth+4,strokeDasharray:"6 3",opacity:.4}),e.jsx("polyline",{points:s,fill:"none",stroke:t.strokeColor,strokeWidth:t.strokeWidth,strokeLinejoin:"round",strokeLinecap:"round",markerEnd:d||c?`url(#${i})`:void 0,markerStart:c?`url(#${u})`:void 0})]})}function nr({element:t,isSelected:o,onSelect:r}){switch(t.type){case"booth":return e.jsx(tr,{element:t,isSelected:o,onSelect:r});case"text":return e.jsx(sr,{element:t,isSelected:o,onSelect:r});case"image":return e.jsx(rr,{element:t,isSelected:o,onSelect:r});case"barricade":return e.jsx(or,{element:t,isSelected:o,onSelect:r});case"connector":return e.jsx(ar,{element:t,isSelected:o,onSelect:r})}}const at=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#ec4899","#06b6d4","#84cc16","#f97316","#6366f1"];function nt(){return at[Math.floor(Math.random()*at.length)]}const re=8;function ir(){const t=x.useRef(null),o=x.useRef(null),[r,i]=x.useState(null),[s,d]=x.useState(null),[c,u]=x.useState(null),[h,m]=x.useState(1),[n,a]=x.useState({x:0,y:0}),[b,T]=x.useState(null),[w,L]=x.useState(!1),[$,W]=x.useState(!1),X=x.useRef({x:0,y:0,panX:0,panY:0}),O=x.useRef(!1),ee=f(l=>l.removeElements),de=f(l=>l.duplicateElements),se=f(l=>l.moveElements);x.useEffect(()=>{const l=p=>{if(p.target instanceof HTMLInputElement||p.target instanceof HTMLTextAreaElement)return;if(p.code==="Space"&&!p.repeat){p.preventDefault(),W(!0);return}const y=f.getState(),R=y.selectedElementIds;(p.key==="Delete"||p.key==="Backspace")&&R.length>0&&(p.preventDefault(),ee(R)),(p.ctrlKey||p.metaKey)&&p.key==="d"&&R.length>0&&(p.preventDefault(),de(R));const k={ArrowUp:[0,-1],ArrowDown:[0,1],ArrowLeft:[-1,0],ArrowRight:[1,0]}[p.key];if(k&&R.length>0){p.preventDefault();const S=p.shiftKey?y.venue.snapToGrid?y.venue.gridSize:10:1;se(R,k[0]*S,k[1]*S)}},j=p=>{p.code==="Space"&&W(!1)};return window.addEventListener("keydown",l),window.addEventListener("keyup",j),()=>{window.removeEventListener("keydown",l),window.removeEventListener("keyup",j)}},[ee,de,se]),x.useEffect(()=>{const l=o.current;if(!l)return;const j=p=>p.preventDefault();return l.addEventListener("contextmenu",j),()=>l.removeEventListener("contextmenu",j)},[]);const g=f(l=>l.venue),_=f(l=>l.elements),P=f(l=>l.selectedElementIds),A=f(l=>l.activeTool),B=f(l=>l.setSelectedElement),ze=f(l=>l.toggleSelectedElement),pe=f(l=>l.addElement),Fe=f(l=>l.moveElement),Ke=f(l=>l.moveElements),Ge=f(l=>l.resizeElement),qe=f(l=>l.updateElement),ye=f(l=>l.setStartingPoint),fe=f(l=>l.setActiveTool),Ze=f(l=>l.setVenue),te=P.length===1?P[0]:null,F=x.useCallback((l,j)=>{const p=t.current;if(!p)return{x:0,y:0};const y=p.getBoundingClientRect(),R=(l-y.left)/h,C=(j-y.top)/h;return{x:R,y:C}},[h]),K=x.useCallback(l=>g.snapToGrid?ot(l,g.gridSize):l,[g.snapToGrid,g.gridSize]),Je=x.useCallback((l,j)=>_.find(p=>Le(p)&&l>=p.x&&l<=p.x+p.width&&j>=p.y&&j<=p.y+p.height),[_]),Lt=x.useCallback(l=>{if(O.current){O.current=!1;return}if(r||s||c)return;const{x:j,y:p}=F(l.clientX,l.clientY),y=K(j),R=K(p);switch(A){case"booth-circle":{const C={id:be(),type:"booth",shape:"circle",x:y-40,y:R-40,width:80,height:80,rotation:0,name:"Booth",boothNumber:String(_.filter(k=>k.type==="booth").length+1),tierId:void 0,fillEnabled:!0,fillColor:nt(),borderColor:"#1f2937",borderWidth:1,borderRadius:16,textColor:"#ffffff",showWebsiteCTA:!0,showDescription:!0,isStartingPoint:!1,websiteCtaText:"Visit website",websiteCtaButtonColor:"#111827",websiteCtaTextColor:"#ffffff",websiteCtaRadius:10,showVisitedCTA:!1,visitedCtaText:"Mark as visited",visitedCtaButtonColor:"#111827",visitedCtaTextColor:"#ffffff",visitedCtaRadius:10,showFavoriteCTA:!1,favoriteCtaText:"Mark as favorite",favoriteCtaButtonColor:"#111827",favoriteCtaTextColor:"#ffffff",favoriteCtaRadius:10,showRateCTA:!1,rateCtaText:"Rate",rateCtaButtonColor:"#111827",rateCtaTextColor:"#ffffff",rateCtaRadius:10,showDirectionCTA:!0,directionCtaText:"Get direction",directionCtaButtonColor:"#111827",directionCtaTextColor:"#ffffff",directionCtaRadius:10,popupConfigured:!1};pe(C),B(C.id),fe("select");break}case"booth-square":{const C={id:be(),type:"booth",shape:"square",x:y-50,y:R-40,width:100,height:80,rotation:0,name:"Booth",boothNumber:String(_.filter(k=>k.type==="booth").length+1),tierId:void 0,fillEnabled:!0,fillColor:nt(),borderColor:"#1f2937",borderWidth:1,borderRadius:10,textColor:"#ffffff",showWebsiteCTA:!0,showDescription:!0,isStartingPoint:!1,websiteCtaText:"Visit website",websiteCtaButtonColor:"#111827",websiteCtaTextColor:"#ffffff",websiteCtaRadius:10,showVisitedCTA:!1,visitedCtaText:"Mark as visited",visitedCtaButtonColor:"#111827",visitedCtaTextColor:"#ffffff",visitedCtaRadius:10,showFavoriteCTA:!1,favoriteCtaText:"Mark as favorite",favoriteCtaButtonColor:"#111827",favoriteCtaTextColor:"#ffffff",favoriteCtaRadius:10,showRateCTA:!1,rateCtaText:"Rate",rateCtaButtonColor:"#111827",rateCtaTextColor:"#ffffff",rateCtaRadius:10,showDirectionCTA:!0,directionCtaText:"Get direction",directionCtaButtonColor:"#111827",directionCtaTextColor:"#ffffff",directionCtaRadius:10,popupConfigured:!1};pe(C),B(C.id),fe("select");break}case"text":{const C={id:be(),type:"text",x:y-60,y:R-15,width:120,height:30,rotation:0,text:"New Text",fontSize:16,fontWeight:"normal",fillColor:"transparent",textColor:"#000000"};pe(C),B(C.id),fe("select");break}case"barricade":{const C={id:be(),type:"barricade",x:y-60,y:R-20,width:120,height:40,rotation:0,fillEnabled:!0,fillColor:"#94a3b8",borderColor:"#64748b",borderWidth:2,borderRadius:4};pe(C),B(C.id),fe("select");break}case"image":{const C=window.prompt("Enter image URL:");if(C){const k={id:be(),type:"image",x:y-75,y:R-50,width:150,height:100,rotation:0,imageUrl:C,opacity:1};pe(k),B(k.id)}fe("select");break}case"starting-point":{const C=Je(j,p);C&&ye(C.id);break}default:B(null);break}},[A,F,K,_,r,s,c,pe,B,fe,ye,Je]),Wt=x.useCallback((l,j)=>{if(A==="starting-point"){const p=_.find(y=>y.id===l);p&&Le(p)&&ye(l);return}j&&(j.ctrlKey||j.metaKey||j.shiftKey)?ze(l):B(l)},[A,_,B,ze,ye]),we=x.useCallback((l,j)=>{const p=o.current;if(!p)return null;const y=p.getBoundingClientRect(),R=y.left+n.x,C=y.top+n.y,k=R+g.width*h,S=C+g.height*h,D=Math.abs(l-R)<=re,G=Math.abs(l-k)<=re,he=Math.abs(j-C)<=re,Be=Math.abs(j-S)<=re,st=l>=R-re&&l<=k+re,rt=j>=C-re&&j<=S+re;return D&&he?"canvas-top-left":G&&he?"canvas-top-right":D&&Be?"canvas-bottom-left":G&&Be?"canvas-bottom-right":D&&rt?"canvas-left":G&&rt?"canvas-right":he&&st?"canvas-top":Be&&st?"canvas-bottom":null},[n,h,g.width,g.height]),[H,It]=x.useState(null),$t=x.useCallback(l=>{if(s){const j=(l.clientX-s.startX)/h,p=(l.clientY-s.startY)/h,y=D=>g.snapToGrid?ot(D,g.gridSize):D;let R=s.startWidth,C=s.startHeight,k=s.startPanX,S=s.startPanY;(s.type==="canvas-right"||s.type==="canvas-top-right"||s.type==="canvas-bottom-right")&&(R=Math.max(200,y(s.startWidth+j))),(s.type==="canvas-left"||s.type==="canvas-top-left"||s.type==="canvas-bottom-left")&&(R=Math.max(200,y(s.startWidth-j)),k=s.startPanX+(s.startWidth-R)*h),(s.type==="canvas-bottom"||s.type==="canvas-bottom-left"||s.type==="canvas-bottom-right")&&(C=Math.max(200,y(s.startHeight+p))),(s.type==="canvas-top"||s.type==="canvas-top-left"||s.type==="canvas-top-right")&&(C=Math.max(200,y(s.startHeight-p)),S=s.startPanY+(s.startHeight-C)*h),Ze({width:R,height:C}),a({x:k,y:S});return}A==="select"&&!r&&!w&&It(we(l.clientX,l.clientY))},[s,A,r,w,h,g.snapToGrid,g.gridSize,we,Ze]),Ht=x.useCallback(l=>{if(A!=="select")return;const j=we(l.clientX,l.clientY);j&&(l.preventDefault(),l.stopPropagation(),d({type:j,startX:l.clientX,startY:l.clientY,startWidth:g.width,startHeight:g.height,startPanX:n.x,startPanY:n.y}))},[A,we,g.width,g.height,n.x,n.y]),Qe=x.useCallback(()=>{d(null)},[]),Yt=x.useCallback(l=>{if(s)return;if(l.button===1||l.button===2||l.button===0&&l.altKey||l.button===0&&$){L(!0),X.current={x:l.clientX,y:l.clientY,panX:n.x,panY:n.y},l.preventDefault();return}const p=l.target;if(p.closest("[data-rotation-handle]")&&te){const k=F(l.clientX,l.clientY),S=_.find(D=>D.id===te);if(S&&"rotation"in S){const D=S.x+S.width/2,G=S.y+S.height/2,he=Math.atan2(k.y-G,k.x-D);i({elementId:te,offsetX:0,offsetY:0,type:"rotate",startAngle:he,startRotation:S.rotation})}l.stopPropagation();return}if(p.closest("[data-resize-handle]")&&te){const k=F(l.clientX,l.clientY),S=_.find(D=>D.id===te);S&&"width"in S&&i({elementId:te,offsetX:k.x-(S.x+S.width),offsetY:k.y-(S.y+S.height),type:"resize"}),l.stopPropagation();return}const C=p.closest("[data-element-id]");if(C&&A==="select"){const k=C.getAttribute("data-element-id"),S=_.find(D=>D.id===k);if(S&&"x"in S){const D=F(l.clientX,l.clientY),G=P.includes(k),he=G&&P.length>1;!G&&!l.ctrlKey&&!l.metaKey&&!l.shiftKey&&B(k),i({elementId:k,offsetX:D.x-S.x,offsetY:D.y-S.y,type:"move",multi:he||P.length>1&&(l.ctrlKey||l.metaKey||l.shiftKey),lastX:D.x,lastY:D.y})}return}if(A==="select"&&l.button===0&&!C){const k=F(l.clientX,l.clientY);u({startX:k.x,startY:k.y,currentX:k.x,currentY:k.y})}},[s,A,P,te,_,F,n,$,B]),Xt=x.useCallback(l=>{if(w){const p=l.clientX-X.current.x,y=l.clientY-X.current.y;a({x:X.current.panX+p,y:X.current.panY+y});return}if(c){const p=F(l.clientX,l.clientY);u(y=>y?{...y,currentX:p.x,currentY:p.y}:null);return}if(!r)return;const j=F(l.clientX,l.clientY);if(r.type==="rotate"){const p=_.find(y=>y.id===r.elementId);if(p&&"rotation"in p&&r.startAngle!=null&&r.startRotation!=null){const y=p.x+p.width/2,R=p.y+p.height/2,k=(Math.atan2(j.y-R,j.x-y)-r.startAngle)*180/Math.PI;let S=r.startRotation+k;S=(S%360+360)%360,S>180&&(S-=360),qe(r.elementId,{rotation:Math.round(S*10)/10})}return}if(r.type==="move")if(r.multi&&P.length>1){const p=K(j.x-(r.lastX??j.x)),y=K(j.y-(r.lastY??j.y));(p!==0||y!==0)&&(Ke(P,p,y),i({...r,lastX:(r.lastX??j.x)+p,lastY:(r.lastY??j.y)+y}))}else{const p=K(j.x-r.offsetX),y=K(j.y-r.offsetY);Fe(r.elementId,p,y)}else{const p=_.find(y=>y.id===r.elementId);if(p&&"width"in p){const y=Math.max(20,K(j.x-r.offsetX-p.x)),R=Math.max(20,K(j.y-r.offsetY-p.y));Ge(r.elementId,y,R)}}},[r,w,c,F,K,Fe,Ke,Ge,qe,_,P]),et=x.useCallback(()=>{if(c){const l=Math.min(c.startX,c.currentX),j=Math.min(c.startY,c.currentY),p=Math.abs(c.currentX-c.startX),y=Math.abs(c.currentY-c.startY);if(p>3||y>3){const R=_.filter(C=>{if(!("x"in C&&"width"in C))return!1;const k=C.x,S=C.y,D=C.width,G=C.height;return k<l+p&&k+D>l&&S<j+y&&S+G>j}).map(C=>C.id);R.length>0?(f.setState({selectedElementIds:R}),O.current=!0):B(null)}u(null);return}i(null),L(!1)},[c,_,B]),De=x.useCallback(l=>{l.preventDefault();const j=l.deltaY>0?.95:1.05;m(p=>Math.min(5,Math.max(.1,p*j)))},[]);x.useEffect(()=>{const l=o.current;if(l)return l.addEventListener("wheel",De,{passive:!1}),()=>l.removeEventListener("wheel",De)},[De]);const Ot=x.useCallback(()=>m(l=>Math.min(5,l*1.25)),[]),Ut=x.useCallback(()=>m(l=>Math.max(.1,l*.8)),[]),Vt=x.useCallback(()=>{m(1),a({x:0,y:0})},[]),Ft=x.useCallback(()=>{const l=t.current?.parentElement;if(!l)return;const j=l.clientWidth,p=l.clientHeight,y=Math.min(j/g.width,p/g.height)*.9;m(Math.min(5,Math.max(.1,y))),a({x:(j-g.width*y)/2,y:(p-g.height*y)/2})},[g.width,g.height]),Y=te?_.find(l=>l.id===te):null,Kt=Y&&"rotation"in Y,me=Y&&Le(Y)?Y:null,Gt=me&&me.popupConfigured&&me.id!==b?me:null,tt=s?s.type==="canvas-left"||s.type==="canvas-right"?"ew-resize":s.type==="canvas-top"||s.type==="canvas-bottom"?"ns-resize":s.type==="canvas-top-left"||s.type==="canvas-bottom-right"?"nwse-resize":"nesw-resize":H==="canvas-left"||H==="canvas-right"?"ew-resize":H==="canvas-top"||H==="canvas-bottom"?"ns-resize":H==="canvas-top-left"||H==="canvas-bottom-right"?"nwse-resize":H==="canvas-top-right"||H==="canvas-bottom-left"?"nesw-resize":void 0;return e.jsxs("div",{ref:o,className:"relative flex-1 overflow-hidden bg-muted",onMouseMove:$t,onMouseDown:Ht,onMouseUp:Qe,onMouseLeave:Qe,style:{cursor:tt},children:[e.jsxs("svg",{ref:t,width:g.width*h,height:g.height*h,viewBox:`0 0 ${g.width} ${g.height}`,className:"absolute",style:{left:n.x,top:n.y,cursor:tt?void 0:w?"grabbing":$?"grab":c?"crosshair":r?"move":A!=="select"?"crosshair":"default"},onClick:Lt,onMouseDown:Yt,onMouseMove:Xt,onMouseUp:et,onMouseLeave:et,children:[e.jsx("rect",{x:"0",y:"0",width:g.width,height:g.height,fill:g.backgroundColor}),!g.backgroundImage&&e.jsx(rs,{venue:g,elements:_,idPrefix:"admin-map-bg",opacity:.55}),g.backgroundImage&&e.jsx("g",{transform:(g.backgroundRotation??0)!==0||(g.backgroundZoom??1)!==1?`translate(${g.width/2}, ${g.height/2}) rotate(${g.backgroundRotation??0}) scale(${g.backgroundZoom??1}) translate(${-g.width/2}, ${-g.height/2})`:void 0,style:{pointerEvents:"none"},children:e.jsx("image",{href:g.backgroundImage,x:"0",y:"0",width:g.width,height:g.height,opacity:g.backgroundOpacity??1,preserveAspectRatio:"xMidYMid slice"})}),g.showGrid&&e.jsxs(e.Fragment,{children:[e.jsx(er,{gridSize:g.gridSize}),e.jsx("rect",{x:"0",y:"0",width:g.width,height:g.height,fill:"url(#admin-grid-pattern)"})]}),_.map(l=>e.jsx("g",{"data-element-id":l.id,children:e.jsx(nr,{element:l,isSelected:P.includes(l.id),onSelect:Wt})},l.id)),Y&&"width"in Y&&e.jsx("rect",{"data-resize-handle":!0,x:Y.x+Y.width-5,y:Y.y+Y.height-5,width:10,height:10,fill:"#3b82f6",stroke:"#fff",strokeWidth:1,style:{cursor:"nwse-resize"}}),Kt&&Y&&"width"in Y&&e.jsx("ellipse",{"data-rotation-handle":!0,cx:Y.x+Y.width/2,cy:Y.y-14,rx:6,ry:6,fill:"#3b82f6",stroke:"#fff",strokeWidth:1,style:{cursor:"grab"}}),A==="select"&&e.jsxs(e.Fragment,{children:[e.jsx("rect",{x:-3,y:g.height/2-20,width:6,height:40,rx:3,fill:"#94a3b8",opacity:H==="canvas-left"||s?.type==="canvas-left"?.9:.35,style:{cursor:"ew-resize",pointerEvents:"none"}}),e.jsx("rect",{x:g.width-3,y:g.height/2-20,width:6,height:40,rx:3,fill:"#94a3b8",opacity:H==="canvas-right"||s?.type==="canvas-right"?.9:.3,style:{cursor:"ew-resize",pointerEvents:"none"}}),e.jsx("rect",{x:g.width/2-20,y:-3,width:40,height:6,rx:3,fill:"#94a3b8",opacity:H==="canvas-top"||s?.type==="canvas-top"?.9:.35,style:{cursor:"ns-resize",pointerEvents:"none"}}),e.jsx("rect",{x:g.width/2-20,y:g.height-3,width:40,height:6,rx:3,fill:"#94a3b8",opacity:H==="canvas-bottom"||s?.type==="canvas-bottom"?.9:.3,style:{cursor:"ns-resize",pointerEvents:"none"}}),e.jsx("rect",{x:-8,y:-8,width:10,height:10,rx:2,fill:"#64748b",opacity:H==="canvas-top-left"||s?.type==="canvas-top-left"?.9:.4,style:{cursor:"nwse-resize",pointerEvents:"none"}}),e.jsx("rect",{x:g.width-8,y:-8,width:10,height:10,rx:2,fill:"#64748b",opacity:H==="canvas-top-right"||s?.type==="canvas-top-right"?.9:.4,style:{cursor:"nesw-resize",pointerEvents:"none"}}),e.jsx("rect",{x:-8,y:g.height-8,width:10,height:10,rx:2,fill:"#64748b",opacity:H==="canvas-bottom-left"||s?.type==="canvas-bottom-left"?.9:.4,style:{cursor:"nesw-resize",pointerEvents:"none"}}),e.jsx("rect",{x:g.width-8,y:g.height-8,width:10,height:10,rx:2,fill:"#64748b",opacity:H==="canvas-bottom-right"||s?.type==="canvas-bottom-right"?.9:.4,style:{cursor:"nwse-resize",pointerEvents:"none"}})]}),c&&e.jsx("rect",{x:Math.min(c.startX,c.currentX),y:Math.min(c.startY,c.currentY),width:Math.abs(c.currentX-c.startX),height:Math.abs(c.currentY-c.startY),fill:"rgba(59,130,246,0.08)",stroke:"#3b82f6",strokeWidth:1,strokeDasharray:"4 2",pointerEvents:"none"})]}),e.jsxs("div",{className:"absolute bottom-3 left-3 flex items-center gap-1 rounded-xl border bg-background/90 px-1 py-1 shadow-lg backdrop-blur-sm",children:[e.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-lg text-sm font-medium text-muted-foreground hover:bg-muted hover:text-foreground transition-colors",onClick:Ut,title:"Zoom out",children:"âˆ’"}),e.jsxs("button",{className:"flex h-7 min-w-14 items-center justify-center rounded-lg text-xs font-medium text-muted-foreground hover:bg-muted hover:text-foreground transition-colors",onClick:Vt,title:"Reset zoom",children:[Math.round(h*100),"%"]}),e.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-lg text-sm font-medium text-muted-foreground hover:bg-muted hover:text-foreground transition-colors",onClick:Ot,title:"Zoom in",children:"+"}),e.jsx("div",{className:"mx-0.5 h-4 w-px bg-border"}),e.jsx("button",{className:"flex h-7 items-center justify-center rounded-lg px-2 text-[10px] font-medium text-muted-foreground hover:bg-muted hover:text-foreground transition-colors",onClick:Ft,title:"Fit to view",children:"Fit"})]}),e.jsx(os,{booth:Gt,onClose:()=>{me&&T(me.id)},containerRef:t,viewTransform:{x:n.x,y:n.y,scale:h}})]})}const He=x.forwardRef(({className:t,...o},r)=>e.jsx("textarea",{className:ne("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...o}));He.displayName="Textarea";var Me="Switch",[lr]=ct(Me),[cr,dr]=lr(Me),ft=x.forwardRef((t,o)=>{const{__scopeSwitch:r,name:i,checked:s,defaultChecked:d,required:c,disabled:u,value:h="on",onCheckedChange:m,form:n,...a}=t,[b,T]=x.useState(null),w=le(o,O=>T(O)),L=x.useRef(!1),$=b?n||!!b.closest("form"):!0,[W,X]=qt({prop:s,defaultProp:d??!1,onChange:m,caller:Me});return e.jsxs(cr,{scope:r,checked:W,disabled:u,children:[e.jsx(ue.button,{type:"button",role:"switch","aria-checked":W,"aria-required":c,"data-state":bt(W),"data-disabled":u?"":void 0,disabled:u,value:h,...a,ref:w,onClick:oe(t.onClick,O=>{X(ee=>!ee),$&&(L.current=O.isPropagationStopped(),L.current||O.stopPropagation())})}),$&&e.jsx(vt,{control:b,bubbles:!L.current,name:i,value:h,checked:W,required:c,disabled:u,form:n,style:{transform:"translateX(-100%)"}})]})});ft.displayName=Me;var mt="SwitchThumb",gt=x.forwardRef((t,o)=>{const{__scopeSwitch:r,...i}=t,s=dr(mt,r);return e.jsx(ue.span,{"data-state":bt(s.checked),"data-disabled":s.disabled?"":void 0,...i,ref:o})});gt.displayName=mt;var hr="SwitchBubbleInput",vt=x.forwardRef(({__scopeSwitch:t,control:o,checked:r,bubbles:i=!0,...s},d)=>{const c=x.useRef(null),u=le(c,d),h=as(r),m=Zt(o);return x.useEffect(()=>{const n=c.current;if(!n)return;const a=window.HTMLInputElement.prototype,T=Object.getOwnPropertyDescriptor(a,"checked").set;if(h!==r&&T){const w=new Event("click",{bubbles:i});T.call(n,r),n.dispatchEvent(w)}},[h,r,i]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:u,style:{...s.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});vt.displayName=hr;function bt(t){return t?"checked":"unchecked"}var jt=ft,xr=gt;const V=x.forwardRef(({className:t,...o},r)=>e.jsx(jt,{className:ne("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...o,ref:r,children:e.jsx(xr,{className:ne("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));V.displayName=jt.displayName;function ur(t,o){return x.useReducer((r,i)=>o[r][i]??r,t)}var Ye="ScrollArea",[yt]=ct(Ye),[pr,U]=yt(Ye),wt=x.forwardRef((t,o)=>{const{__scopeScrollArea:r,type:i="hover",dir:s,scrollHideDelay:d=600,...c}=t,[u,h]=x.useState(null),[m,n]=x.useState(null),[a,b]=x.useState(null),[T,w]=x.useState(null),[L,$]=x.useState(null),[W,X]=x.useState(0),[O,ee]=x.useState(0),[de,se]=x.useState(!1),[g,_]=x.useState(!1),P=le(o,B=>h(B)),A=ns(s);return e.jsx(pr,{scope:r,type:i,dir:A,scrollHideDelay:d,scrollArea:u,viewport:m,onViewportChange:n,content:a,onContentChange:b,scrollbarX:T,onScrollbarXChange:w,scrollbarXEnabled:de,onScrollbarXEnabledChange:se,scrollbarY:L,onScrollbarYChange:$,scrollbarYEnabled:g,onScrollbarYEnabledChange:_,onCornerWidthChange:X,onCornerHeightChange:ee,children:e.jsx(ue.div,{dir:A,...c,ref:P,style:{position:"relative","--radix-scroll-area-corner-width":W+"px","--radix-scroll-area-corner-height":O+"px",...t.style}})})});wt.displayName=Ye;var Ct="ScrollAreaViewport",Nt=x.forwardRef((t,o)=>{const{__scopeScrollArea:r,children:i,nonce:s,...d}=t,c=U(Ct,r),u=x.useRef(null),h=le(o,u,c.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),e.jsx(ue.div,{"data-radix-scroll-area-viewport":"",...d,ref:h,style:{overflowX:c.scrollbarXEnabled?"scroll":"hidden",overflowY:c.scrollbarYEnabled?"scroll":"hidden",...t.style},children:e.jsx("div",{ref:c.onContentChange,style:{minWidth:"100%",display:"table"},children:i})})]})});Nt.displayName=Ct;var Q="ScrollAreaScrollbar",Xe=x.forwardRef((t,o)=>{const{forceMount:r,...i}=t,s=U(Q,t.__scopeScrollArea),{onScrollbarXEnabledChange:d,onScrollbarYEnabledChange:c}=s,u=t.orientation==="horizontal";return x.useEffect(()=>(u?d(!0):c(!0),()=>{u?d(!1):c(!1)}),[u,d,c]),s.type==="hover"?e.jsx(fr,{...i,ref:o,forceMount:r}):s.type==="scroll"?e.jsx(mr,{...i,ref:o,forceMount:r}):s.type==="auto"?e.jsx(kt,{...i,ref:o,forceMount:r}):s.type==="always"?e.jsx(Oe,{...i,ref:o}):null});Xe.displayName=Q;var fr=x.forwardRef((t,o)=>{const{forceMount:r,...i}=t,s=U(Q,t.__scopeScrollArea),[d,c]=x.useState(!1);return x.useEffect(()=>{const u=s.scrollArea;let h=0;if(u){const m=()=>{window.clearTimeout(h),c(!0)},n=()=>{h=window.setTimeout(()=>c(!1),s.scrollHideDelay)};return u.addEventListener("pointerenter",m),u.addEventListener("pointerleave",n),()=>{window.clearTimeout(h),u.removeEventListener("pointerenter",m),u.removeEventListener("pointerleave",n)}}},[s.scrollArea,s.scrollHideDelay]),e.jsx(Se,{present:r||d,children:e.jsx(kt,{"data-state":d?"visible":"hidden",...i,ref:o})})}),mr=x.forwardRef((t,o)=>{const{forceMount:r,...i}=t,s=U(Q,t.__scopeScrollArea),d=t.orientation==="horizontal",c=_e(()=>h("SCROLL_END"),100),[u,h]=ur("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return x.useEffect(()=>{if(u==="idle"){const m=window.setTimeout(()=>h("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(m)}},[u,s.scrollHideDelay,h]),x.useEffect(()=>{const m=s.viewport,n=d?"scrollLeft":"scrollTop";if(m){let a=m[n];const b=()=>{const T=m[n];a!==T&&(h("SCROLL"),c()),a=T};return m.addEventListener("scroll",b),()=>m.removeEventListener("scroll",b)}},[s.viewport,d,h,c]),e.jsx(Se,{present:r||u!=="hidden",children:e.jsx(Oe,{"data-state":u==="hidden"?"hidden":"visible",...i,ref:o,onPointerEnter:oe(t.onPointerEnter,()=>h("POINTER_ENTER")),onPointerLeave:oe(t.onPointerLeave,()=>h("POINTER_LEAVE"))})})}),kt=x.forwardRef((t,o)=>{const r=U(Q,t.__scopeScrollArea),{forceMount:i,...s}=t,[d,c]=x.useState(!1),u=t.orientation==="horizontal",h=_e(()=>{if(r.viewport){const m=r.viewport.offsetWidth<r.viewport.scrollWidth,n=r.viewport.offsetHeight<r.viewport.scrollHeight;c(u?m:n)}},10);return ge(r.viewport,h),ge(r.content,h),e.jsx(Se,{present:i||d,children:e.jsx(Oe,{"data-state":d?"visible":"hidden",...s,ref:o})})}),Oe=x.forwardRef((t,o)=>{const{orientation:r="vertical",...i}=t,s=U(Q,t.__scopeScrollArea),d=x.useRef(null),c=x.useRef(0),[u,h]=x.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),m=Pt(u.viewport,u.content),n={...i,sizes:u,onSizesChange:h,hasThumb:m>0&&m<1,onThumbChange:b=>d.current=b,onThumbPointerUp:()=>c.current=0,onThumbPointerDown:b=>c.current=b};function a(b,T){return wr(b,c.current,u,T)}return r==="horizontal"?e.jsx(gr,{...n,ref:o,onThumbPositionChange:()=>{if(s.viewport&&d.current){const b=s.viewport.scrollLeft,T=it(b,u,s.dir);d.current.style.transform=`translate3d(${T}px, 0, 0)`}},onWheelScroll:b=>{s.viewport&&(s.viewport.scrollLeft=b)},onDragScroll:b=>{s.viewport&&(s.viewport.scrollLeft=a(b,s.dir))}}):r==="vertical"?e.jsx(vr,{...n,ref:o,onThumbPositionChange:()=>{if(s.viewport&&d.current){const b=s.viewport.scrollTop,T=it(b,u);d.current.style.transform=`translate3d(0, ${T}px, 0)`}},onWheelScroll:b=>{s.viewport&&(s.viewport.scrollTop=b)},onDragScroll:b=>{s.viewport&&(s.viewport.scrollTop=a(b))}}):null}),gr=x.forwardRef((t,o)=>{const{sizes:r,onSizesChange:i,...s}=t,d=U(Q,t.__scopeScrollArea),[c,u]=x.useState(),h=x.useRef(null),m=le(o,h,d.onScrollbarXChange);return x.useEffect(()=>{h.current&&u(getComputedStyle(h.current))},[h]),e.jsx(Et,{"data-orientation":"horizontal",...s,ref:m,sizes:r,style:{bottom:0,left:d.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:d.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Ae(r)+"px",...t.style},onThumbPointerDown:n=>t.onThumbPointerDown(n.x),onDragScroll:n=>t.onDragScroll(n.x),onWheelScroll:(n,a)=>{if(d.viewport){const b=d.viewport.scrollLeft+n.deltaX;t.onWheelScroll(b),At(b,a)&&n.preventDefault()}},onResize:()=>{h.current&&d.viewport&&c&&i({content:d.viewport.scrollWidth,viewport:d.viewport.offsetWidth,scrollbar:{size:h.current.clientWidth,paddingStart:ke(c.paddingLeft),paddingEnd:ke(c.paddingRight)}})}})}),vr=x.forwardRef((t,o)=>{const{sizes:r,onSizesChange:i,...s}=t,d=U(Q,t.__scopeScrollArea),[c,u]=x.useState(),h=x.useRef(null),m=le(o,h,d.onScrollbarYChange);return x.useEffect(()=>{h.current&&u(getComputedStyle(h.current))},[h]),e.jsx(Et,{"data-orientation":"vertical",...s,ref:m,sizes:r,style:{top:0,right:d.dir==="ltr"?0:void 0,left:d.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Ae(r)+"px",...t.style},onThumbPointerDown:n=>t.onThumbPointerDown(n.y),onDragScroll:n=>t.onDragScroll(n.y),onWheelScroll:(n,a)=>{if(d.viewport){const b=d.viewport.scrollTop+n.deltaY;t.onWheelScroll(b),At(b,a)&&n.preventDefault()}},onResize:()=>{h.current&&d.viewport&&c&&i({content:d.viewport.scrollHeight,viewport:d.viewport.offsetHeight,scrollbar:{size:h.current.clientHeight,paddingStart:ke(c.paddingTop),paddingEnd:ke(c.paddingBottom)}})}})}),[br,St]=yt(Q),Et=x.forwardRef((t,o)=>{const{__scopeScrollArea:r,sizes:i,hasThumb:s,onThumbChange:d,onThumbPointerUp:c,onThumbPointerDown:u,onThumbPositionChange:h,onDragScroll:m,onWheelScroll:n,onResize:a,...b}=t,T=U(Q,r),[w,L]=x.useState(null),$=le(o,P=>L(P)),W=x.useRef(null),X=x.useRef(""),O=T.viewport,ee=i.content-i.viewport,de=xe(n),se=xe(h),g=_e(a,10);function _(P){if(W.current){const A=P.clientX-W.current.left,B=P.clientY-W.current.top;m({x:A,y:B})}}return x.useEffect(()=>{const P=A=>{const B=A.target;w?.contains(B)&&de(A,ee)};return document.addEventListener("wheel",P,{passive:!1}),()=>document.removeEventListener("wheel",P,{passive:!1})},[O,w,ee,de]),x.useEffect(se,[i,se]),ge(w,g),ge(T.content,g),e.jsx(br,{scope:r,scrollbar:w,hasThumb:s,onThumbChange:xe(d),onThumbPointerUp:xe(c),onThumbPositionChange:se,onThumbPointerDown:xe(u),children:e.jsx(ue.div,{...b,ref:$,style:{position:"absolute",...b.style},onPointerDown:oe(t.onPointerDown,P=>{P.button===0&&(P.target.setPointerCapture(P.pointerId),W.current=w.getBoundingClientRect(),X.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",T.viewport&&(T.viewport.style.scrollBehavior="auto"),_(P))}),onPointerMove:oe(t.onPointerMove,_),onPointerUp:oe(t.onPointerUp,P=>{const A=P.target;A.hasPointerCapture(P.pointerId)&&A.releasePointerCapture(P.pointerId),document.body.style.webkitUserSelect=X.current,T.viewport&&(T.viewport.style.scrollBehavior=""),W.current=null})})})}),Ne="ScrollAreaThumb",Tt=x.forwardRef((t,o)=>{const{forceMount:r,...i}=t,s=St(Ne,t.__scopeScrollArea);return e.jsx(Se,{present:r||s.hasThumb,children:e.jsx(jr,{ref:o,...i})})}),jr=x.forwardRef((t,o)=>{const{__scopeScrollArea:r,style:i,...s}=t,d=U(Ne,r),c=St(Ne,r),{onThumbPositionChange:u}=c,h=le(o,a=>c.onThumbChange(a)),m=x.useRef(void 0),n=_e(()=>{m.current&&(m.current(),m.current=void 0)},100);return x.useEffect(()=>{const a=d.viewport;if(a){const b=()=>{if(n(),!m.current){const T=Cr(a,u);m.current=T,u()}};return u(),a.addEventListener("scroll",b),()=>a.removeEventListener("scroll",b)}},[d.viewport,n,u]),e.jsx(ue.div,{"data-state":c.hasThumb?"visible":"hidden",...s,ref:h,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...i},onPointerDownCapture:oe(t.onPointerDownCapture,a=>{const T=a.target.getBoundingClientRect(),w=a.clientX-T.left,L=a.clientY-T.top;c.onThumbPointerDown({x:w,y:L})}),onPointerUp:oe(t.onPointerUp,c.onThumbPointerUp)})});Tt.displayName=Ne;var Ue="ScrollAreaCorner",Rt=x.forwardRef((t,o)=>{const r=U(Ue,t.__scopeScrollArea),i=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&i?e.jsx(yr,{...t,ref:o}):null});Rt.displayName=Ue;var yr=x.forwardRef((t,o)=>{const{__scopeScrollArea:r,...i}=t,s=U(Ue,r),[d,c]=x.useState(0),[u,h]=x.useState(0),m=!!(d&&u);return ge(s.scrollbarX,()=>{const n=s.scrollbarX?.offsetHeight||0;s.onCornerHeightChange(n),h(n)}),ge(s.scrollbarY,()=>{const n=s.scrollbarY?.offsetWidth||0;s.onCornerWidthChange(n),c(n)}),m?e.jsx(ue.div,{...i,ref:o,style:{width:d,height:u,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function ke(t){return t?parseInt(t,10):0}function Pt(t,o){const r=t/o;return isNaN(r)?0:r}function Ae(t){const o=Pt(t.viewport,t.content),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=(t.scrollbar.size-r)*o;return Math.max(i,18)}function wr(t,o,r,i="ltr"){const s=Ae(r),d=s/2,c=o||d,u=s-c,h=r.scrollbar.paddingStart+c,m=r.scrollbar.size-r.scrollbar.paddingEnd-u,n=r.content-r.viewport,a=i==="ltr"?[0,n]:[n*-1,0];return Mt([h,m],a)(t)}function it(t,o,r="ltr"){const i=Ae(o),s=o.scrollbar.paddingStart+o.scrollbar.paddingEnd,d=o.scrollbar.size-s,c=o.content-o.viewport,u=d-i,h=r==="ltr"?[0,c]:[c*-1,0],m=is(t,h);return Mt([0,c],[0,u])(m)}function Mt(t,o){return r=>{if(t[0]===t[1]||o[0]===o[1])return o[0];const i=(o[1]-o[0])/(t[1]-t[0]);return o[0]+i*(r-t[0])}}function At(t,o){return t>0&&t<o}var Cr=(t,o=()=>{})=>{let r={left:t.scrollLeft,top:t.scrollTop},i=0;return(function s(){const d={left:t.scrollLeft,top:t.scrollTop},c=r.left!==d.left,u=r.top!==d.top;(c||u)&&o(),r=d,i=window.requestAnimationFrame(s)})(),()=>window.cancelAnimationFrame(i)};function _e(t,o){const r=xe(t),i=x.useRef(0);return x.useEffect(()=>()=>window.clearTimeout(i.current),[]),x.useCallback(()=>{window.clearTimeout(i.current),i.current=window.setTimeout(r,o)},[r,o])}function ge(t,o){const r=xe(o);Jt(()=>{let i=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(i),i=window.requestAnimationFrame(r)});return s.observe(t),()=>{window.cancelAnimationFrame(i),s.unobserve(t)}}},[t,r])}var _t=wt,Nr=Nt,kr=Rt;const Ve=x.forwardRef(({className:t,children:o,...r},i)=>e.jsxs(_t,{ref:i,className:ne("relative overflow-hidden",t),...r,children:[e.jsx(Nr,{className:"h-full w-full rounded-[inherit]",children:o}),e.jsx(zt,{}),e.jsx(kr,{})]}));Ve.displayName=_t.displayName;const zt=x.forwardRef(({className:t,orientation:o="vertical",...r},i)=>e.jsx(Xe,{ref:i,orientation:o,className:ne("flex touch-none select-none transition-colors",o==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",o==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...r,children:e.jsx(Tt,{className:"relative flex-1 rounded-full bg-border"})}));zt.displayName=Xe.displayName;var Sr=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Er=Sr.reduce((t,o)=>{const r=Qt(`Primitive.${o}`),i=x.forwardRef((s,d)=>{const{asChild:c,...u}=s,h=c?r:o;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(h,{...u,ref:d})});return i.displayName=`Primitive.${o}`,{...t,[o]:i}},{}),Tr="Separator",lt="horizontal",Rr=["horizontal","vertical"],Dt=x.forwardRef((t,o)=>{const{decorative:r,orientation:i=lt,...s}=t,d=Pr(i)?i:lt,u=r?{role:"none"}:{"aria-orientation":d==="vertical"?d:void 0,role:"separator"};return e.jsx(Er.div,{"data-orientation":d,...u,...s,ref:o})});Dt.displayName=Tr;function Pr(t){return Rr.includes(t)}var Bt=Dt;const I=x.forwardRef(({className:t,orientation:o="horizontal",decorative:r=!0,...i},s)=>e.jsx(Bt,{ref:s,decorative:r,orientation:o,className:ne("shrink-0 bg-border",o==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...i}));I.displayName=Bt.displayName;const We="__no_tier__";function ve({children:t}){return e.jsx("h3",{className:"mb-2 text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:t})}function N({label:t,children:o}){return e.jsxs("div",{className:"grid grid-cols-[1fr_1fr] items-center gap-2",children:[e.jsx(E,{className:"text-xs",children:t}),o]})}function Mr({element:t}){const[o,r]=x.useState(!0),[i,s]=x.useState(!1),d=f(a=>a.updateElement),c=f(a=>a.removeElement),u=f(a=>a.setStartingPoint),h=f(a=>a.duplicateElements),m=f(a=>a.venue.tiers);x.useEffect(()=>{queueMicrotask(()=>{r(!0),s(!1)})},[t.id]);const n=a=>d(t.id,{...a,popupConfigured:!0});return e.jsxs("div",{className:"space-y-2.5",children:[e.jsx(N,{label:"Name",children:e.jsx(v,{value:t.name,onChange:a=>d(t.id,{name:a.target.value}),className:"h-8 text-xs"})}),e.jsx(N,{label:"Booth #",children:e.jsx(v,{value:t.boothNumber,onChange:a=>d(t.id,{boothNumber:a.target.value}),className:"h-8 text-xs"})}),e.jsx(N,{label:"Tier",children:e.jsxs(Ee,{value:t.tierId??We,onValueChange:a=>d(t.id,{tierId:a===We?void 0:a}),children:[e.jsx(Te,{className:"h-8 text-xs",children:e.jsx(Re,{placeholder:"No tier"})}),e.jsxs(Pe,{children:[e.jsx(ae,{value:We,className:"text-xs text-muted-foreground",children:"No tier"}),m.map(a=>e.jsx(ae,{value:a.id,className:"text-xs",children:a.name},a.id))]})]})}),e.jsxs("div",{className:"rounded-md border border-border/70 p-2.5 space-y-2",children:[e.jsxs("button",{type:"button",className:"flex w-full items-center justify-between",onClick:()=>{s(a=>!a),n({})},children:[e.jsx(E,{className:"cursor-pointer text-xs font-medium",children:"Popup Appearance"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:i?"Hide":"Show"})]}),i&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"rounded-md border border-border/60 p-2 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(E,{className:"text-xs",children:"Show Description"}),e.jsx(V,{checked:t.showDescription,onCheckedChange:a=>n({showDescription:a})})]}),t.showDescription&&e.jsx(He,{value:t.description??"",onChange:a=>n({description:a.target.value}),className:"min-h-[60px] text-xs",rows:3})]}),e.jsxs("div",{className:"rounded-md border border-border/60 p-2 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(E,{className:"text-xs",children:"Visit Website"}),e.jsx(V,{checked:t.showWebsiteCTA,onCheckedChange:a=>n({showWebsiteCTA:a})})]}),t.showWebsiteCTA&&e.jsxs(e.Fragment,{children:[e.jsx(v,{value:t.websiteUrl??"",onChange:a=>n({websiteUrl:a.target.value}),placeholder:"https://...",className:"h-8 text-xs"}),e.jsx(N,{label:"Text",children:e.jsx(v,{value:t.websiteCtaText??"Visit website",onChange:a=>n({websiteCtaText:a.target.value}),className:"h-8 text-xs"})}),e.jsx(N,{label:"Color",children:e.jsx(v,{type:"color",value:t.websiteCtaButtonColor??"#111827",onChange:a=>n({websiteCtaButtonColor:a.target.value}),className:"h-8 cursor-pointer p-1"})}),e.jsx(N,{label:"Text Color",children:e.jsx(v,{type:"color",value:t.websiteCtaTextColor??"#ffffff",onChange:a=>n({websiteCtaTextColor:a.target.value}),className:"h-8 cursor-pointer p-1"})}),e.jsx(N,{label:"Radius",children:e.jsx(v,{type:"number",min:0,max:24,value:t.websiteCtaRadius??10,onChange:a=>n({websiteCtaRadius:Number(a.target.value)}),className:"h-8 text-xs"})})]})]}),[{title:"Mark as Visited",show:t.showVisitedCTA,setShow:a=>n({showVisitedCTA:a}),text:t.visitedCtaText??"Mark as visited",setText:a=>n({visitedCtaText:a}),color:t.visitedCtaButtonColor??"#111827",setColor:a=>n({visitedCtaButtonColor:a}),textColor:t.visitedCtaTextColor??"#ffffff",setTextColor:a=>n({visitedCtaTextColor:a}),radius:t.visitedCtaRadius??10,setRadius:a=>n({visitedCtaRadius:a})},{title:"Mark as Favorite",show:t.showFavoriteCTA,setShow:a=>n({showFavoriteCTA:a}),text:t.favoriteCtaText??"Mark as favorite",setText:a=>n({favoriteCtaText:a}),color:t.favoriteCtaButtonColor??"#111827",setColor:a=>n({favoriteCtaButtonColor:a}),textColor:t.favoriteCtaTextColor??"#ffffff",setTextColor:a=>n({favoriteCtaTextColor:a}),radius:t.favoriteCtaRadius??10,setRadius:a=>n({favoriteCtaRadius:a})},{title:"Rate (5 star)",show:t.showRateCTA,setShow:a=>n({showRateCTA:a}),text:t.rateCtaText??"Rate",setText:a=>n({rateCtaText:a}),color:t.rateCtaButtonColor??"#111827",setColor:a=>n({rateCtaButtonColor:a}),textColor:t.rateCtaTextColor??"#ffffff",setTextColor:a=>n({rateCtaTextColor:a}),radius:t.rateCtaRadius??10,setRadius:a=>n({rateCtaRadius:a})},{title:"Get Direction",show:t.showDirectionCTA,setShow:a=>n({showDirectionCTA:a}),text:t.directionCtaText??"Get direction",setText:a=>n({directionCtaText:a}),color:t.directionCtaButtonColor??"#111827",setColor:a=>n({directionCtaButtonColor:a}),textColor:t.directionCtaTextColor??"#ffffff",setTextColor:a=>n({directionCtaTextColor:a}),radius:t.directionCtaRadius??10,setRadius:a=>n({directionCtaRadius:a})}].map(a=>e.jsxs("div",{className:"rounded-md border border-border/60 p-2 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(E,{className:"text-xs",children:a.title}),e.jsx(V,{checked:a.show,onCheckedChange:a.setShow})]}),a.show&&e.jsxs(e.Fragment,{children:[e.jsx(N,{label:"Text",children:e.jsx(v,{value:a.text,onChange:b=>a.setText(b.target.value),className:"h-8 text-xs"})}),e.jsx(N,{label:"Color",children:e.jsx(v,{type:"color",value:a.color,onChange:b=>a.setColor(b.target.value),className:"h-8 cursor-pointer p-1"})}),e.jsx(N,{label:"Text Color",children:e.jsx(v,{type:"color",value:a.textColor,onChange:b=>a.setTextColor(b.target.value),className:"h-8 cursor-pointer p-1"})}),e.jsx(N,{label:"Radius",children:e.jsx(v,{type:"number",min:0,max:24,value:a.radius,onChange:b=>a.setRadius(Number(b.target.value)),className:"h-8 text-xs"})})]})]},a.title))]})]}),e.jsxs("div",{className:"rounded-md border border-border/70 p-2.5 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(E,{className:"text-xs font-medium",children:"Booth Appearance"}),e.jsx(V,{checked:o,onCheckedChange:r})]}),o&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx(E,{className:"text-xs",children:"Logo URL"}),e.jsx(v,{value:t.logoUrl??"",onChange:a=>d(t.id,{logoUrl:a.target.value||void 0}),placeholder:"https://example.com/logo.png",className:"h-8 text-xs"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between rounded-md border border-border/60 px-2",children:[e.jsx(E,{className:"text-xs",children:"Fill"}),e.jsx(V,{checked:t.fillEnabled!==!1,onCheckedChange:a=>d(t.id,{fillEnabled:a})})]}),e.jsx(v,{type:"color",value:t.fillColor??"#3b82f6",disabled:t.fillEnabled===!1,onChange:a=>d(t.id,{fillColor:a.target.value}),className:"h-8 cursor-pointer p-1 disabled:cursor-not-allowed"})]}),e.jsx(N,{label:"Border Color",children:e.jsx(v,{type:"color",value:t.borderColor??"#1f2937",onChange:a=>d(t.id,{borderColor:a.target.value}),className:"h-8 cursor-pointer p-1"})}),e.jsx(N,{label:"Border Width",children:e.jsx(v,{type:"number",min:0,max:12,value:t.borderWidth??1,onChange:a=>d(t.id,{borderWidth:Number(a.target.value)}),className:"h-8 text-xs"})}),t.shape==="square"&&e.jsx(N,{label:"Radius",children:e.jsx(v,{type:"number",min:0,max:Math.min(t.width,t.height)/2,value:t.borderRadius??10,onChange:a=>d(t.id,{borderRadius:Number(a.target.value)}),className:"h-8 text-xs"})}),e.jsx(N,{label:"Text Color",children:e.jsx(v,{type:"color",value:t.textColor,onChange:a=>d(t.id,{textColor:a.target.value}),className:"h-8 cursor-pointer p-1"})})]})]}),e.jsx(I,{}),e.jsx(ve,{children:"Dimensions"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{children:[e.jsx(E,{className:"text-xs",children:"Width"}),e.jsx(v,{type:"number",value:t.width,onChange:a=>d(t.id,{width:Number(a.target.value)}),className:"h-8 text-xs"})]}),e.jsxs("div",{children:[e.jsx(E,{className:"text-xs",children:"Height"}),e.jsx(v,{type:"number",value:t.height,onChange:a=>d(t.id,{height:Number(a.target.value)}),className:"h-8 text-xs"})]}),e.jsxs("div",{children:[e.jsx(E,{className:"text-xs",children:"Rotation"}),e.jsx(v,{type:"number",value:t.rotation,onChange:a=>d(t.id,{rotation:Number(a.target.value)}),className:"h-8 text-xs"})]})]}),e.jsx(N,{label:"X Position",children:e.jsx(v,{type:"number",value:Math.round(t.x),onChange:a=>d(t.id,{x:Number(a.target.value)}),className:"h-8 text-xs"})}),e.jsx(N,{label:"Y Position",children:e.jsx(v,{type:"number",value:Math.round(t.y),onChange:a=>d(t.id,{y:Number(a.target.value)}),className:"h-8 text-xs"})}),e.jsx(I,{}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{variant:"outline",size:"sm",className:"flex-1 text-xs",onClick:()=>u(t.id),children:[e.jsx($e,{className:"mr-1 h-3 w-3"})," Set Start"]}),e.jsxs(M,{variant:"outline",size:"sm",className:"flex-1 text-xs",onClick:()=>h([t.id]),children:[e.jsx(ie,{className:"mr-1 h-3 w-3"})," Duplicate"]})]}),e.jsxs(M,{variant:"destructive",size:"sm",className:"w-full text-xs",onClick:()=>c(t.id),children:[e.jsx(ce,{className:"mr-1 h-3 w-3"})," Delete"]})]})}function Ar({element:t}){const o=f(s=>s.updateElement),r=f(s=>s.removeElement),i=f(s=>s.duplicateElements);return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(E,{className:"text-xs",children:"Text Content"}),e.jsx(He,{value:t.text,onChange:s=>o(t.id,{text:s.target.value}),className:"mt-1 min-h-[60px] text-xs",rows:3})]}),e.jsx(N,{label:"Font Size",children:e.jsx(v,{type:"number",value:t.fontSize,min:8,onChange:s=>o(t.id,{fontSize:Number(s.target.value)}),className:"h-8 text-xs"})}),e.jsx(N,{label:"Font Weight",children:e.jsxs(Ee,{value:t.fontWeight,onValueChange:s=>o(t.id,{fontWeight:s}),children:[e.jsx(Te,{className:"h-8 text-xs",children:e.jsx(Re,{})}),e.jsxs(Pe,{children:[e.jsx(ae,{value:"normal",children:"Normal"}),e.jsx(ae,{value:"bold",children:"Bold"})]})]})}),e.jsx(N,{label:"Fill Color",children:e.jsx(v,{type:"color",value:t.fillColor==="transparent"?"#ffffff":t.fillColor,onChange:s=>o(t.id,{fillColor:s.target.value}),className:"h-8 cursor-pointer p-1"})}),e.jsx(N,{label:"Text Color",children:e.jsx(v,{type:"color",value:t.textColor,onChange:s=>o(t.id,{textColor:s.target.value}),className:"h-8 cursor-pointer p-1"})}),e.jsx(I,{}),e.jsx(ve,{children:"Dimensions"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx(E,{className:"text-xs",children:"Width"}),e.jsx(v,{type:"number",value:t.width,onChange:s=>o(t.id,{width:Number(s.target.value)}),className:"h-8 text-xs"})]}),e.jsxs("div",{children:[e.jsx(E,{className:"text-xs",children:"Height"}),e.jsx(v,{type:"number",value:t.height,onChange:s=>o(t.id,{height:Number(s.target.value)}),className:"h-8 text-xs"})]})]}),e.jsx(N,{label:"Rotation",children:e.jsx(v,{type:"number",value:t.rotation,onChange:s=>o(t.id,{rotation:Number(s.target.value)}),className:"h-8 text-xs"})}),e.jsx(I,{}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{variant:"outline",size:"sm",className:"flex-1 text-xs",onClick:()=>i([t.id]),children:[e.jsx(ie,{className:"mr-1 h-3 w-3"})," Duplicate"]}),e.jsxs(M,{variant:"destructive",size:"sm",className:"flex-1 text-xs",onClick:()=>r(t.id),children:[e.jsx(ce,{className:"mr-1 h-3 w-3"})," Delete"]})]})]})}function _r({element:t}){const o=f(s=>s.updateElement),r=f(s=>s.removeElement),i=f(s=>s.duplicateElements);return e.jsxs("div",{className:"space-y-3",children:[e.jsx(ve,{children:"Dimensions"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{children:[e.jsx(E,{className:"text-xs",children:"Width"}),e.jsx(v,{type:"number",value:t.width,onChange:s=>o(t.id,{width:Number(s.target.value)}),className:"h-8 text-xs"})]}),e.jsxs("div",{children:[e.jsx(E,{className:"text-xs",children:"Height"}),e.jsx(v,{type:"number",value:t.height,onChange:s=>o(t.id,{height:Number(s.target.value)}),className:"h-8 text-xs"})]}),e.jsxs("div",{children:[e.jsx(E,{className:"text-xs",children:"Rotation"}),e.jsx(v,{type:"number",value:t.rotation,onChange:s=>o(t.id,{rotation:Number(s.target.value)}),className:"h-8 text-xs"})]})]}),e.jsx(N,{label:"X Position",children:e.jsx(v,{type:"number",value:Math.round(t.x),onChange:s=>o(t.id,{x:Number(s.target.value)}),className:"h-8 text-xs"})}),e.jsx(N,{label:"Y Position",children:e.jsx(v,{type:"number",value:Math.round(t.y),onChange:s=>o(t.id,{y:Number(s.target.value)}),className:"h-8 text-xs"})}),e.jsx(I,{}),e.jsx(ve,{children:"Barricade appearance"}),e.jsxs("div",{className:"flex items-center justify-between rounded-md border p-2",children:[e.jsx(E,{className:"text-xs",children:"Fill"}),e.jsx(V,{checked:t.fillEnabled!==!1,onCheckedChange:s=>o(t.id,{fillEnabled:s})})]}),e.jsx(N,{label:"Fill Color",children:e.jsx(v,{type:"color",value:t.fillColor,onChange:s=>o(t.id,{fillColor:s.target.value}),className:"h-8 cursor-pointer p-1"})}),e.jsx(N,{label:"Border Color",children:e.jsx(v,{type:"color",value:t.borderColor,onChange:s=>o(t.id,{borderColor:s.target.value}),className:"h-8 cursor-pointer p-1"})}),e.jsx(N,{label:"Border Width",children:e.jsx(v,{type:"number",value:t.borderWidth,min:0,onChange:s=>o(t.id,{borderWidth:Number(s.target.value)}),className:"h-8 text-xs"})}),e.jsx(N,{label:"Border Radius",children:e.jsx(v,{type:"number",value:t.borderRadius,min:0,onChange:s=>o(t.id,{borderRadius:Number(s.target.value)}),className:"h-8 text-xs"})}),e.jsx(I,{}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{variant:"outline",size:"sm",className:"flex-1 text-xs",onClick:()=>i([t.id]),children:[e.jsx(ie,{className:"mr-1 h-3 w-3"})," Duplicate"]}),e.jsxs(M,{variant:"destructive",size:"sm",className:"flex-1 text-xs",onClick:()=>r(t.id),children:[e.jsx(ce,{className:"mr-1 h-3 w-3"})," Delete"]})]})]})}function zr({element:t}){const o=f(s=>s.updateElement),r=f(s=>s.removeElement),i=f(s=>s.duplicateElements);return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(E,{className:"text-xs",children:"Image URL"}),e.jsx(v,{value:t.imageUrl,onChange:s=>o(t.id,{imageUrl:s.target.value}),placeholder:"https://...",className:"h-8 text-xs"})]}),e.jsx(N,{label:"Opacity",children:e.jsx("input",{type:"range",min:0,max:1,step:.05,value:t.opacity,onChange:s=>o(t.id,{opacity:Number(s.target.value)}),className:"w-full"})}),e.jsx(I,{}),e.jsx(ve,{children:"Dimensions"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx(E,{className:"text-xs",children:"Width"}),e.jsx(v,{type:"number",value:t.width,onChange:s=>o(t.id,{width:Number(s.target.value)}),className:"h-8 text-xs"})]}),e.jsxs("div",{children:[e.jsx(E,{className:"text-xs",children:"Height"}),e.jsx(v,{type:"number",value:t.height,onChange:s=>o(t.id,{height:Number(s.target.value)}),className:"h-8 text-xs"})]})]}),e.jsx(N,{label:"Rotation",children:e.jsx(v,{type:"number",value:t.rotation,onChange:s=>o(t.id,{rotation:Number(s.target.value)}),className:"h-8 text-xs"})}),e.jsx(I,{}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{variant:"outline",size:"sm",className:"flex-1 text-xs",onClick:()=>i([t.id]),children:[e.jsx(ie,{className:"mr-1 h-3 w-3"})," Duplicate"]}),e.jsxs(M,{variant:"destructive",size:"sm",className:"flex-1 text-xs",onClick:()=>r(t.id),children:[e.jsx(ce,{className:"mr-1 h-3 w-3"})," Delete"]})]})]})}function Dr({element:t}){const o=f(s=>s.updateElement),r=f(s=>s.removeElement),i=f(s=>s.duplicateElements);return e.jsxs("div",{className:"space-y-3",children:[e.jsx(N,{label:"Type",children:e.jsxs(Ee,{value:t.connectorType,onValueChange:s=>o(t.id,{connectorType:s}),children:[e.jsx(Te,{className:"h-8 text-xs",children:e.jsx(Re,{})}),e.jsxs(Pe,{children:[e.jsx(ae,{value:"directional",children:"Directional"}),e.jsx(ae,{value:"bidirectional",children:"Bidirectional"}),e.jsx(ae,{value:"polyline",children:"Polyline"})]})]})}),e.jsx(N,{label:"Stroke Color",children:e.jsx(v,{type:"color",value:t.strokeColor,onChange:s=>o(t.id,{strokeColor:s.target.value}),className:"h-8 cursor-pointer p-1"})}),e.jsx(N,{label:"Stroke Width",children:e.jsx(v,{type:"number",value:t.strokeWidth,min:1,max:20,onChange:s=>o(t.id,{strokeWidth:Number(s.target.value)}),className:"h-8 text-xs"})}),e.jsx(I,{}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{variant:"outline",size:"sm",className:"flex-1 text-xs",onClick:()=>i([t.id]),children:[e.jsx(ie,{className:"mr-1 h-3 w-3"})," Duplicate"]}),e.jsxs(M,{variant:"destructive",size:"sm",className:"flex-1 text-xs",onClick:()=>r(t.id),children:[e.jsx(ce,{className:"mr-1 h-3 w-3"})," Delete"]})]})]})}function Br({elements:t}){const o=f(n=>n.updateElements),r=f(n=>n.removeElements),i=f(n=>n.duplicateElements),s=t.map(n=>n.id),d=t.every(n=>"width"in n&&"height"in n),c=t.every(n=>"x"in n&&"y"in n),u=t.every(n=>"rotation"in n),h=t.every(n=>"fillColor"in n),m=t.every(n=>"textColor"in n);return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"rounded-md bg-muted/50 p-2",children:[e.jsxs("p",{className:"text-xs font-medium",children:[t.length," elements selected"]}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Editing shared properties will apply to all selected elements."})]}),d&&e.jsxs(e.Fragment,{children:[e.jsx(I,{}),e.jsx(ve,{children:"Dimensions"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx(E,{className:"text-xs",children:"Width"}),e.jsx(v,{type:"number",placeholder:"mixed",onChange:n=>{const a=Number(n.target.value);a>0&&o(s,{width:a})},className:"h-8 text-xs"})]}),e.jsxs("div",{children:[e.jsx(E,{className:"text-xs",children:"Height"}),e.jsx(v,{type:"number",placeholder:"mixed",onChange:n=>{const a=Number(n.target.value);a>0&&o(s,{height:a})},className:"h-8 text-xs"})]})]})]}),c&&e.jsxs(e.Fragment,{children:[e.jsx(N,{label:"X Position",children:e.jsx(v,{type:"number",placeholder:"mixed",onChange:n=>o(s,{x:Number(n.target.value)}),className:"h-8 text-xs"})}),e.jsx(N,{label:"Y Position",children:e.jsx(v,{type:"number",placeholder:"mixed",onChange:n=>o(s,{y:Number(n.target.value)}),className:"h-8 text-xs"})})]}),u&&e.jsx(N,{label:"Rotation",children:e.jsx(v,{type:"number",placeholder:"mixed",onChange:n=>o(s,{rotation:Number(n.target.value)}),className:"h-8 text-xs"})}),h&&e.jsx(N,{label:"Fill Color",children:e.jsx(v,{type:"color",onChange:n=>o(s,{fillColor:n.target.value}),className:"h-8 cursor-pointer p-1"})}),m&&e.jsx(N,{label:"Text Color",children:e.jsx(v,{type:"color",onChange:n=>o(s,{textColor:n.target.value}),className:"h-8 cursor-pointer p-1"})}),e.jsx(I,{}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{variant:"outline",size:"sm",className:"flex-1 text-xs",onClick:()=>i(s),children:[e.jsx(ie,{className:"mr-1 h-3 w-3"})," Duplicate"]}),e.jsxs(M,{variant:"destructive",size:"sm",className:"flex-1 text-xs",onClick:()=>r(s),children:[e.jsx(ce,{className:"mr-1 h-3 w-3"})," Delete All"]})]})]})}function Lr({element:t,elements:o}){const r=f(i=>i.setSelectedElement);return e.jsxs("div",{className:"mb-3",children:[e.jsx(E,{className:"text-xs",children:"Selected Element"}),e.jsxs(Ee,{value:t.id,onValueChange:i=>r(i),children:[e.jsx(Te,{className:"mt-1 h-8 text-xs",children:e.jsx(Re,{})}),e.jsx(Pe,{children:o.map(i=>e.jsx(ae,{value:i.id,className:"text-xs",children:i.type==="booth"?`${i.name} (#${i.boothNumber})`:i.type==="text"?i.text.slice(0,25):i.type==="image"?"Image":i.type==="barricade"?"Barricade":`Connector (${i.connectorType})`},i.id))})]})]})}function Wr(){return e.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 py-12 text-center",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-muted",children:e.jsx(Bs,{className:"h-5 w-5 text-muted-foreground"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:"No element selected"}),e.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Click an element on the canvas or select from the elements list."})]})]})}function Ir(){const t=f(c=>c.selectedElementIds),o=f(c=>c.elements),r=t.map(c=>o.find(u=>u.id===c)).filter(Boolean),i=r.length>1,s=r.length===1?r[0]:null,d=i?`${r.length} Elements`:s?`${s.type.charAt(0).toUpperCase()+s.type.slice(1)} Properties`:"Properties";return e.jsxs("aside",{className:"flex w-72 flex-col border-r border-border bg-background [&_button]:text-[12px] [&_h2]:text-[12px] [&_h3]:text-[12px] [&_input]:text-[12px] [&_label]:text-[12px] [&_p]:text-[12px] [&_span]:text-[12px] [&_textarea]:text-[12px]",children:[e.jsx("div",{className:"flex h-10 shrink-0 items-center border-b border-border px-4",children:e.jsx("h2",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:d})}),e.jsx(Ve,{className:"flex-1",children:e.jsxs("div",{className:"p-4",children:[i&&e.jsx(Br,{elements:r}),s&&e.jsxs(e.Fragment,{children:[e.jsx(Lr,{element:s,elements:o}),s.type==="booth"&&e.jsx(Mr,{element:s}),s.type==="text"&&e.jsx(Ar,{element:s}),s.type==="image"&&e.jsx(zr,{element:s}),s.type==="barricade"&&e.jsx(_r,{element:s}),s.type==="connector"&&e.jsx(Dr,{element:s})]}),r.length===0&&e.jsx(Wr,{})]})})]})}const $r=[{tool:"select",icon:e.jsx(zs,{className:"h-4 w-4"}),label:"Select"},{tool:"booth-circle",icon:e.jsx(js,{className:"h-4 w-4"}),label:"Circle Booth"},{tool:"booth-square",icon:e.jsx(ut,{className:"h-4 w-4"}),label:"Square Booth"},{tool:"text",icon:e.jsx(pt,{className:"h-4 w-4"}),label:"Text"},{tool:"image",icon:e.jsx(dt,{className:"h-4 w-4"}),label:"Image"},{tool:"barricade",icon:e.jsx(ht,{className:"h-4 w-4"}),label:"Barricade"},{tool:"connector-directional",icon:e.jsx(vs,{className:"h-4 w-4"}),label:"Directional"},{tool:"connector-bidirectional",icon:e.jsx(ms,{className:"h-4 w-4"}),label:"Bidirectional"},{tool:"connector-polyline",icon:e.jsx(xt,{className:"h-4 w-4"}),label:"Polyline"}];function je({children:t}){return e.jsx("h3",{className:"mb-2 text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:t})}function Ce({label:t,children:o}){return e.jsxs("div",{className:"grid grid-cols-[1fr_1fr] items-center gap-2",children:[e.jsx(E,{className:"text-xs",children:t}),o]})}function Hr(){const t=f(r=>r.activeTool),o=f(r=>r.setActiveTool);return e.jsxs("div",{children:[e.jsx(je,{children:"Tools"}),e.jsx(Ie,{delayDuration:200,children:e.jsx("div",{className:"grid grid-cols-5 gap-1",children:$r.map(({tool:r,icon:i,label:s})=>e.jsxs(q,{children:[e.jsx(Z,{asChild:!0,children:e.jsx(M,{variant:t===r?"default":"outline",size:"icon",className:ne("h-9 w-9",t===r&&"ring-2 ring-primary/30"),onClick:()=>o(r),children:i})}),e.jsx(J,{side:"bottom",children:s})]},r))})})]})}const Yr={booth:e.jsx(ut,{className:"h-3.5 w-3.5 text-blue-500"}),text:e.jsx(pt,{className:"h-3.5 w-3.5 text-amber-500"}),image:e.jsx(dt,{className:"h-3.5 w-3.5 text-emerald-500"}),barricade:e.jsx(ht,{className:"h-3.5 w-3.5 text-slate-500"}),connector:e.jsx(xt,{className:"h-3.5 w-3.5 text-purple-500"})};function Xr(t){switch(t.type){case"booth":return`${t.name} (#${t.boothNumber})`;case"text":return t.text.length>20?t.text.slice(0,20)+"â€¦":t.text;case"image":return"Image";case"barricade":return"Barricade";case"connector":return`Connector (${t.connectorType})`}}function Or(){const t=f(h=>h.elements),o=f(h=>h.selectedElementIds),r=f(h=>h.setSelectedElement),i=f(h=>h.toggleSelectedElement),s=f(h=>h.duplicateElements),d=f(h=>h.removeElements),c=f(h=>h.removeElement),u=x.useCallback((h,m)=>{m.ctrlKey||m.metaKey||m.shiftKey?i(h):r(h)},[r,i]);return e.jsxs("div",{children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsx(je,{children:e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(Ps,{className:"h-3 w-3"}),"Elements (",t.length,")"]})}),o.length>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs(q,{children:[e.jsx(Z,{asChild:!0,children:e.jsx(M,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>s(o),children:e.jsx(ie,{className:"h-3 w-3"})})}),e.jsx(J,{side:"bottom",children:"Duplicate selected"})]}),e.jsxs(q,{children:[e.jsx(Z,{asChild:!0,children:e.jsx(M,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive hover:text-destructive",onClick:()=>{o.length>1?d(o):c(o[0])},children:e.jsx(ce,{className:"h-3 w-3"})})}),e.jsx(J,{side:"bottom",children:"Delete selected"})]})]})]}),t.length===0?e.jsx("p",{className:"text-xs text-muted-foreground",children:"No elements yet. Use tools above to add."}):e.jsx("div",{className:"space-y-0.5 max-h-48 overflow-y-auto",children:t.map(h=>{const m=o.includes(h.id);return e.jsxs("div",{className:ne("flex items-center gap-2 rounded-md px-2 py-1.5 text-xs cursor-pointer transition-colors",m?"bg-primary/10 text-primary ring-1 ring-primary/20":"hover:bg-muted/80 text-foreground"),onClick:n=>u(h.id,n),children:[Yr[h.type],e.jsx("span",{className:"flex-1 truncate",children:Xr(h)}),h.type==="booth"&&h.isStartingPoint&&e.jsx($e,{className:"h-3 w-3 text-red-500 shrink-0"}),e.jsx(M,{variant:"ghost",size:"icon",className:"h-5 w-5 shrink-0 opacity-0 group-hover:opacity-100 hover:opacity-100",style:{opacity:m?.7:void 0},onClick:n=>{n.stopPropagation(),s([h.id])},children:e.jsx(ie,{className:"h-2.5 w-2.5"})})]},h.id)})}),o.length>1&&e.jsxs("p",{className:"mt-1.5 text-[10px] text-muted-foreground",children:[o.length," elements selected â€” Ctrl/Shift+click to multi-select"]})]})}function Ur(){const t=f(r=>r.venue),o=f(r=>r.setVenue);return e.jsxs("div",{className:"space-y-3",children:[e.jsx(je,{children:"Canvas Settings"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx(E,{className:"text-xs",children:"Width"}),e.jsx(v,{type:"number",value:t.width,onChange:r=>o({width:Number(r.target.value)}),className:"h-8 text-xs"})]}),e.jsxs("div",{children:[e.jsx(E,{className:"text-xs",children:"Height"}),e.jsx(v,{type:"number",value:t.height,onChange:r=>o({height:Number(r.target.value)}),className:"h-8 text-xs"})]})]}),e.jsxs("div",{children:[e.jsx(E,{className:"text-xs",children:"Grid Size"}),e.jsx(v,{type:"number",value:t.gridSize,min:5,onChange:r=>o({gridSize:Number(r.target.value)}),className:"h-8 text-xs"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(E,{className:"text-xs",children:"Show Grid"}),e.jsx(V,{checked:t.showGrid,onCheckedChange:r=>o({showGrid:r})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(E,{className:"text-xs",children:"Snap to Grid"}),e.jsx(V,{checked:t.snapToGrid,onCheckedChange:r=>o({snapToGrid:r})})]}),e.jsx(Ce,{label:"Background",children:e.jsx(v,{type:"color",value:t.backgroundColor,onChange:r=>o({backgroundColor:r.target.value}),className:"h-8 w-full cursor-pointer p-1"})}),e.jsxs("div",{children:[e.jsx(E,{className:"text-xs",children:"Background Image URL"}),e.jsx(v,{value:t.backgroundImage??"",onChange:r=>o({backgroundImage:r.target.value||void 0}),placeholder:"https://...",className:"h-8 text-xs"})]}),t.backgroundImage&&e.jsxs(e.Fragment,{children:[e.jsx(Ce,{label:"Background rotation (Â°)",children:e.jsx(v,{type:"number",value:t.backgroundRotation??0,onChange:r=>o({backgroundRotation:Number(r.target.value)}),className:"h-8 text-xs"})}),e.jsx(Ce,{label:"Background opacity",children:e.jsx(v,{type:"number",min:0,max:1,step:.1,value:t.backgroundOpacity??1,onChange:r=>o({backgroundOpacity:Number(r.target.value)}),className:"h-8 text-xs"})}),e.jsx(Ce,{label:"Background zoom",children:e.jsx(v,{type:"number",min:.1,max:3,step:.1,value:t.backgroundZoom??1,onChange:r=>o({backgroundZoom:Number(r.target.value)}),placeholder:"1 = 100%",className:"h-8 text-xs"})})]})]})}const Vr=["glow","scale","sparkle","shadow"],Fr=["glow","scale","sparkle","shadow"];function Kr({tierId:t,open:o,onOpenChange:r}){const i=f(n=>n.venue.tiers),s=f(n=>n.updateTier),d=t?i.find(n=>n.id===t)??null:null;if(!d)return null;const c=d.boothStyle??{},u=d.popupStyle??{},h=(n,a)=>s(d.id,{boothStyle:{...c,[n]:a}}),m=(n,a)=>s(d.id,{popupStyle:{...u,[n]:a}});return e.jsx(ls,{open:o,onOpenChange:r,children:e.jsxs(cs,{className:"sm:max-w-md",children:[e.jsxs(ds,{children:[e.jsxs(hs,{children:["Tier: ",d.name]}),e.jsx(xs,{children:"These styles apply to all booths with this tier. Booth appearance affects the map; popup appearance affects the detail card."})]}),e.jsxs("div",{className:"grid gap-6 py-2",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(E,{className:"text-sm font-medium",children:"Booth appearance (on map)"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:Vr.map(n=>e.jsxs("div",{className:"flex items-center justify-between rounded-md border p-3",children:[e.jsxs("span",{className:"text-xs",children:[n==="glow"&&"Glowing effect",n==="scale"&&"Scaling effect",n==="sparkle"&&"Sparkling",n==="shadow"&&"Shadow effect"]}),e.jsx(V,{checked:!!c[n],onCheckedChange:a=>h(n,a)},`booth-switch-${n}`)]},`booth-${n}`))})]}),e.jsx(I,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(E,{className:"text-sm font-medium",children:"Popup details appearance"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:Fr.map(n=>e.jsxs("div",{className:"flex items-center justify-between rounded-md border p-3",children:[e.jsxs("span",{className:"text-xs",children:[n==="glow"&&"Glowing effect",n==="scale"&&"Scaling effect",n==="sparkle"&&"Sparkling",n==="shadow"&&"Shadow effect"]}),e.jsx(V,{checked:!!u[n],onCheckedChange:a=>m(n,a)},`popup-switch-${n}`)]},`popup-${n}`))})]})]})]},t??"dialog")})}function Gr(){const t=f(c=>c.venue.tiers),o=f(c=>c.addTier),r=f(c=>c.updateTier),i=f(c=>c.removeTier),[s,d]=x.useState(null);return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"mb-1 flex items-center justify-between",children:[e.jsx(je,{children:"Booth Tiers"}),e.jsxs(M,{variant:"outline",size:"sm",className:"h-7 px-2 text-xs",onClick:o,children:[e.jsx(Hs,{className:"mr-1 h-3 w-3"}),"Add"]})]}),e.jsx("div",{className:"space-y-1.5",children:t.map((c,u)=>e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(v,{value:c.name,onChange:h=>r(c.id,{name:h.target.value}),className:"h-8 flex-1 text-xs",placeholder:`Tier ${u+1}`}),e.jsx(M,{variant:"ghost",size:"icon",className:"h-8 w-8 shrink-0",onClick:()=>d(c),title:"Customize tier appearance",children:e.jsx(Ws,{className:"h-3.5 w-3.5 text-muted-foreground"})}),e.jsx(M,{variant:"ghost",size:"icon",className:"h-8 w-8 shrink-0 text-destructive hover:text-destructive",disabled:t.length<=1,onClick:()=>i(c.id),title:t.length<=1?"Keep at least one tier":"Delete tier",children:e.jsx(ce,{className:"h-3.5 w-3.5"})})]},c.id))}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Tier is optional per booth. Use Customize (palette) for glow, scale, sparkle, shadow."}),e.jsx(Kr,{tierId:s?.id??null,open:!!s,onOpenChange:c=>!c&&d(null)})]})}function qr(){const{projectName:t=""}=es(),o=x.useRef(null),r=f(w=>w.getConfig),i=f(w=>w.loadConfig),s=f(w=>w.resetAll),d=f(w=>w.setPreviewMode),c=f(w=>w.setPreviewAsKiosk),u=f(w=>w.undo),h=f(w=>w.redo),m=f(w=>w.past.length>0),n=f(w=>w.future.length>0),a=x.useCallback(async()=>{const w=r(),L=t.trim().toLowerCase();if(!L){alert("Missing project name in route. Open via /admin/:projectName.");return}ts(L,w);try{await ss(L,w)}catch($){console.error($),alert("Failed to save manifest file.")}},[r,t]),b=x.useCallback(w=>{const L=w.target.files?.[0];if(!L)return;const $=new FileReader;$.onload=()=>{try{const W=JSON.parse($.result);i(W)}catch{alert("Invalid JSON file")}},$.readAsText(L),w.target.value=""},[i]),T=x.useCallback(()=>{window.confirm("Reset all elements, paths, and settings? This cannot be undone.")&&s()},[s]);return e.jsx(Ie,{delayDuration:200,children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs(q,{children:[e.jsx(Z,{asChild:!0,children:e.jsx(M,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:u,disabled:!m,"aria-label":"Undo",children:e.jsx(Zs,{className:"h-3.5 w-3.5"})})}),e.jsx(J,{children:"Undo"})]}),e.jsxs(q,{children:[e.jsx(Z,{asChild:!0,children:e.jsx(M,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:h,disabled:!n,"aria-label":"Redo",children:e.jsx(Xs,{className:"h-3.5 w-3.5"})})}),e.jsx(J,{children:"Redo"})]}),e.jsxs(q,{children:[e.jsx(Z,{asChild:!0,children:e.jsx(M,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>{c(!1),d(!0)},"aria-label":"Preview user mode",children:e.jsx(ks,{className:"h-3.5 w-3.5"})})}),e.jsx(J,{children:"Preview (User)"})]}),e.jsxs(q,{children:[e.jsx(Z,{asChild:!0,children:e.jsx(M,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>{c(!0),d(!0)},"aria-label":"Preview kiosk mode",children:e.jsx(As,{className:"h-3.5 w-3.5"})})}),e.jsx(J,{children:"Preview (Kiosk)"})]}),e.jsxs(q,{children:[e.jsx(Z,{asChild:!0,children:e.jsx(M,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>{a()},"aria-label":"Save venue",children:e.jsx(Cs,{className:"h-3.5 w-3.5"})})}),e.jsx(J,{children:"Save Venue"})]}),e.jsxs(q,{children:[e.jsx(Z,{asChild:!0,children:e.jsx(M,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>o.current?.click(),"aria-label":"Import manifest",children:e.jsx(Qs,{className:"h-3.5 w-3.5"})})}),e.jsx(J,{children:"Import"})]}),e.jsxs(q,{children:[e.jsx(Z,{asChild:!0,children:e.jsx(M,{variant:"destructive",size:"icon",className:"h-8 w-8 text-white",onClick:T,"aria-label":"Reset all",children:e.jsx(Us,{className:"h-3.5 w-3.5"})})}),e.jsx(J,{children:"Reset All"})]}),e.jsx("input",{ref:o,type:"file",accept:".json",className:"hidden",onChange:b})]})})}function Zr(){const t=f(r=>r.activityHistory),o=x.useMemo(()=>t.slice(0,10),[t]);return e.jsxs("div",{children:[e.jsx(je,{children:e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(Es,{className:"h-3 w-3"}),"Activity History"]})}),o.length===0?e.jsx("p",{className:"text-xs text-muted-foreground",children:"No activity yet."}):e.jsx("div",{className:"max-h-36 space-y-1 overflow-y-auto rounded-md border border-border/60 p-2",children:o.map(r=>e.jsxs("div",{className:"flex items-center justify-between gap-2 text-[11px]",children:[e.jsx("span",{className:"truncate text-foreground",children:r.label}),e.jsx("span",{className:"shrink-0 text-muted-foreground",children:new Date(r.at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},r.id))})]})}function Jr(){return e.jsxs("aside",{className:"flex w-72 flex-col border-l border-border bg-background [&_button]:text-[12px] [&_h2]:text-[12px] [&_h3]:text-[12px] [&_input]:text-[12px] [&_label]:text-[12px] [&_p]:text-[12px] [&_span]:text-[12px]",children:[e.jsx("div",{className:"shrink-0 border-b border-border px-4 py-2",children:e.jsx("h2",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:"Elements & Canvas"})}),e.jsx(Ve,{className:"flex-1",children:e.jsxs("div",{className:"space-y-5 p-4",children:[e.jsx(Hr,{}),e.jsx(I,{}),e.jsx(Ie,{delayDuration:200,children:e.jsx(Or,{})}),e.jsx(I,{}),e.jsx(Ur,{}),e.jsx(I,{}),e.jsx(Gr,{}),e.jsx(I,{}),e.jsx(Zr,{})]})})]})}function Qr(){const t=f(o=>o.venue);return e.jsxs("header",{className:"flex h-12 shrink-0 items-center justify-between gap-3 border-b border-border bg-background px-4 text-[12px]",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-[12px] font-semibold tracking-tight",children:"Venue Builder"}),e.jsxs("span",{className:"text-[12px] text-muted-foreground",children:[t.width," Ã— ",t.height]})]}),e.jsx("div",{className:"flex min-w-0 items-center justify-end overflow-x-auto",children:e.jsx(qr,{})})]})}function so(){const t=f(s=>s.isPreviewMode),o=f(s=>s.previewAsKiosk),r=f(s=>s.setPreviewMode),i=f(s=>s.getConfig);if(t){const s=i();return e.jsxs("div",{className:"relative h-screen w-screen",children:[e.jsx(us,{isKiosk:o,config:s}),e.jsxs(M,{variant:"destructive",size:"sm",className:"absolute right-4 top-4 z-50 shadow-lg",onClick:()=>r(!1),children:[e.jsx(ps,{className:"mr-1 h-4 w-4"})," Exit Preview"]})]})}return e.jsxs("div",{className:"flex h-screen flex-col overflow-hidden",children:[e.jsx(Qr,{}),e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsx(Ir,{}),e.jsx(ir,{}),e.jsx(Jr,{})]})]})}export{so as AdminApp};
